!function(t){function e(e){for(var r,o,s=e[0],u=e[1],l=e[2],c=0,d=[];c<s.length;c++)o=s[c],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);for(f&&f(e);d.length;)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},i={0:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var f=u;a.push([70,1]),n()}([,,,function(t,e,n){var r=n(100);try{window;n(101)(r),n(121)(r),n(122)(r),n(125)(r),n(127)(r),n(128)(r),n(134)(r),n(135)(r),n(136)(r),n(66)(r)}catch(t){}t.exports=r},,,,,,,,,,function(t,e,n){var r=o(n(138)),i=o(n(6)),a=o(n(141));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(t,e){e=null==e?[]:[e];var n=this;this.$trigger=function(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"up";for(var o in(i=i||{}).type=i.type||t,i.target=i.target||n,i.mit=n,r)null!=r[o].key&&r[o].key!=i.key&&r[o].key!=i.action||r[o].f(i);for(var o in e)e[o].$trigger(i,a)},this.$pushParent=function(t){for(var n=0;n<e.length;n++)if(t==e[n])return;e.push(t)},this.$removeParent=function(t){for(var n=0;n<e.length;n++)if(e[n]==t)return void e.splice(n,1)};var r=[];this.$listen=function(t,e){"function"==typeof t&&(e=t,t=null),r.push({f:e,key:t})},this.$unlisten=function(t){for(var e=r.length-1;e>=0;e--)r[e].f==t&&r.splice(e,1)},Object.defineProperty(this,"$trigger",{enumerable:!1}),Object.defineProperty(this,"$pushParent",{enumerable:!1}),Object.defineProperty(this,"$removeParent",{enumerable:!1}),Object.defineProperty(this,"$listen",{enumerable:!1}),Object.defineProperty(this,"$unlisten",{enumerable:!1})},u=function(t){if(null!=t.length)return!1;for(var e in t)if("x"!=e&&"y"!=e)return!1;return!0},l=function t(e,n,r){if(null==e)return e;if("boolean"==typeof n&&(n={tree:n}),n=n||{},t.isCamera(e))return r&&e.$pushParent(r),e;if(e instanceof Array)return new c(e,n,r);s.call(this,"object",r);var i=this,o=this,l={},f=function(e,r){Object.prototype.__defineSetter__.call(i,e,(function(r){for(var i in p)null!=p[i].key&&p[i].key!=e||(r=p[i].func(r,e));if(r!=l[e]){if(n.tree&&t.isObject(r)&&!u(r))r=new t(r,n,o);t.isCamera(l[e])&&l[e].$removeParent(o),l[e]=r,o.$trigger({key:e,value:r})}})),Object.prototype.__defineGetter__.call(i,e,(function(){return l[e]})),o.$trigger({key:e,value:r})},d=function(e,r){if(n.tree&&t.isObject(r))r=new t(r,n,o);o[e]=r,l[e]=r,f(e,r)};this.$set=function(e,r){if("string"==typeof e){var i={};i[e]=r,e=i}for(var s in e){r=e[s];n.tree&&t.isObject(r)&&!u(r)&&(r=new t(r,n,o)),(0,a.default)(l).indexOf(s)<0&&f(s,r),this[s]=r}};var p=[];for(var h in this.$setter=function(t,e){"function"==typeof t&&(e=t,t=null),p.push({key:t,func:e})},this.$get=function(){var e={};for(var r in l)n.tree&&t.isCamera(l[r])?e[r]=l[r].$get():e[r]=l[r];return e},this.$load=function(e){for(var n in e)e[n]!=o[n]&&(t.isObject(e[n])&&t.isCamera(o[n])?o[n].$load(e[n]):this.$set(n,e[n]))},e)d(h,e[h]);Object.defineProperty(this,"$set",{enumerable:!1}),Object.defineProperty(this,"$setter",{enumerable:!1}),Object.defineProperty(this,"$get",{enumerable:!1}),Object.defineProperty(this,"$load",{enumerable:!1})},f=function(t,e,n){var r=this;s.call(this,"array",n);var i=this.push;this.push=function(){for(var t=[],n=r.length,a=0;a<arguments.length;a++)e.tree&&l.isObject(arguments[a])&&!u(arguments[a])?t.push(new l(arguments[a],e,r)):t.push(arguments[a]);t.length<=0||(i.apply(r,t),r.$trigger({action:"create",value:t,index:n}))},this.push.apply(this,t),this.delete=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],i=[],a=t+e,o=t;o<a&&o<r.length;o++)i.push(o),n.push(r[o]);n.length<=0||(r.splice(t,e),r.$trigger({action:"delete",value:i,deletes:n}))},this.remove=function(){for(var t=[],e=[],n=r.length-1;n>=0;n--)for(var i=0;i<arguments.length;i++)if(r[n]==arguments[i]){t.push(n),e.push(r[n]),r.splice(n,1);break}r.$trigger({action:"delete",value:t,deletes:e})},this.insert=function(t){for(var n=[],i=1;i<arguments.length;i++)e.tree&&l.isObject(arguments[i])&&!u(arguments[i])?n.push(new l(arguments[i],e,r)):n.push(arguments[i]);if(!(n.length<=0)){var a=[t,0];for(var i in n)a.push(n[i]);r.splice.apply(r,a),r.$trigger({action:"create",value:n,index:t})}};var a=this.sort;this.sort=function(){a.apply(r,arguments),r.$trigger({action:"sort"})};var o=this.reverse;this.reverse=function(){o.apply(r,arguments),r.$trigger({action:"sort"})},this.replaceAll=function(t){r.delete(0,r.length),r.push.apply(r,t)};this.forEach;this.forEach=function(t){for(var e=0;e<this.length;e++)t(this[e])},this.indexOf=function(t){for(var e in r)if(r[e]==t)return Number(e);return-1},this.$get=function(){for(var t=[],n=0;n<r.length;n++)e.tree&&l.isCamera(r[n])?t.push(r[n].$get()):t.push(r[n]);return t},this.$load=function(t){for(var e=Math.max(t.length,r.length)-1;e>=0;e--)e>=t.length?r.delete(e,1):t[e]!=r[e]&&(l.isObject(t[e])&&l.isCamera(r[e])?r[e].$load(t[e]):(r.delete(e,1),r.insert(e,t[e])));for(e=r.length;e<t.length;e++)r.insert(e,t[e])},Object.defineProperty(this,"$load",{enumerable:!1}),Object.defineProperty(this,"$get",{enumerable:!1}),Object.defineProperty(this,"push",{enumerable:!1}),Object.defineProperty(this,"delete",{enumerable:!1}),Object.defineProperty(this,"remove",{enumerable:!1}),Object.defineProperty(this,"insert",{enumerable:!1}),Object.defineProperty(this,"sort",{enumerable:!1}),Object.defineProperty(this,"reverse",{enumerable:!1}),Object.defineProperty(this,"replaceAll",{enumerable:!1}),Object.defineProperty(this,"forEach",{enumerable:!1}),Object.defineProperty(this,"indexOf",{enumerable:!1}),Object.defineProperty(this,"__isCamera",{enumerable:!1,value:!0})},c=function(){var t=new Array;return Object.defineProperty(t,"length",{enumerable:!1}),f.apply(t,arguments),t};l.isCamera=function(t){return t instanceof l||t instanceof c||t instanceof Array&&1==t.__isCamera},l.isObject=function(t){return null!=t&&("object"==(void 0===t?"undefined":(0,i.default)(t))&&((0,r.default)(t).constructor==Object||(0,r.default)(t).constructor==Array))},t.exports=l;try{n(3).Camera=l}catch(t){}n(144)},function(t,e,n){var r,i=t.exports={},a=i.canvas=document.createElement("canvas"),o={premultipliedAlpha:!1};try{r=a.getContext("webgl2",o)}catch(t){r=a.getContext("webgl",o)}i.gl=r,i.getImage=n(158),i.easyFilter=n(159)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r=t.exports=function(t){r.lcg=t,n(137),DMID=1825,t.dmReact=function(e){var n=this,r=n._dmid=DMID;DMID++,this.$render=function(){var r=e;if("function"==typeof e)r=e.call(n);r._option=n._option||{},n.proxy(t.$render(r)),n._proxy.setAttribute("lcg-dom-message",!0),n.ids=n._proxy.ids},this.$render(),this.on=function(e,n){t.domEvent(this._proxy,e,n.bind(this))},this.remove=function(){try{this._proxy.parentNode.removeChild(this._proxy)}catch(t){}},this.css=function(e,i,a){if(null==e)return this._css;if(!this._css||a){if(this._css=new t.ICE(e,"dm-"+r,{dom:n._proxy,static:a?this.__funcID:null}),!this._css||!this._css.render)return;this._css.args(i),this.message("lcg-css-render",(function(){n._css.render()})),a?(n._css.render(),n._css.play()):(this._proxy.appendChild(this._css.styleDom),this._css.render(),this._css.play())}else this._css.extend(e,!0),this._css.args(i),this._css.render(),this._css.play();return this._css},this.scss=function(t,e){return this.css(t,e,!0)}}}},,,function(t,e,n){var r,i=s(n(6)),a=s(n(11)),o=s(n(12));function s(t){return t&&t.__esModule?t:{default:t}}var u=n(3),l=(n(13),u.React),f=t.exports=u(r=function(){function t(){(0,a.default)(this,t)}return(0,o.default)(t,[{key:"init",value:function(t,e){var n=this,r={x:0,y:0,main:n};for(var a in t)r[a]=t[a];this.$dom((function(){return l.createElement("div",null)}));var o={"z-index":1,position:"fixed","user-select":"none",left:r.x+"px",top:r.y+"px",cursor:"default","background-color":"#333",border:"1px solid #000","border-radius":"3px",padding:"2px",width:"max-content","box-shadow":"inset 0px 0px 2px rgba(255,255,255,0.5)",">div":{color:"#eee","font-size":"14px",position:"relative",padding:"0px 5px","min-width":"70px",">div":{display:"none"},":hover":{"background-color":"#ddd",color:"#000",">div":{display:"block"}}}};for(var a in e){var s=u.$r(l.createElement("div",{class:"item"},a));"object"==(0,i.default)(e[a])?s.appendChild(f.new({main:r.main},e[a])):"function"==typeof e[a]&&(s.cb=e[a],s.onclick=function(){r.main.remove(),this.cb()}),n._proxy.appendChild(s)}r.main==n?(document.body.appendChild(n._proxy),n._proxy.oncontextmenu=function(t){t.preventDefault()},this.message("mousedown",(function(t){u.isChild(n._proxy,t.target)||n.remove()}))):(o.position="absolute",o.left="calc(100%)",o.top="-3px"),this.css(o)}}]),t}())||r},function(t,e,n){var r=n(71),i={},a=window.location.href.split("?")[1];if(a)for(var o in a=a.split("&")){var s=a[o].split("=");i[s[0]]=s[1]}null!=i.demo?axios.get("./demos/"+i.demo+".json").then((function(t){document.body.appendChild(r.new(t.data))})):document.body.appendChild(r.new())},function(t,e,n){t.exports=n(72)},function(t,e,n){var r,i=l(n(4)),a=l(n(5)),o=l(n(43)),s=l(n(11)),u=l(n(12));function l(t){return t&&t.__esModule?t:{default:t}}var f=n(3),c=n(13),d=f.React,p=n(145),h=n(148),m=n(14),g=n(160);window.lcg=f,t.exports=f(r=function(){function t(){(0,s.default)(this,t)}return(0,u.default)(t,[{key:"init",value:function(t){var e=this;this.$dom((function(){return d.createElement("div",null,d.createElement("div",{class:"left"},d.createElement("div",{class:"top",lid:"top"},d.createElement("div",{lid:"view"},d.createElement("canvas",{style:"display:none;",lid:"canvas"}))),d.createElement("div",{class:"bottom",lid:"map"})),d.createElement("div",{class:"right",lid:"attrs"}))})),e.ids.canvas.getContext("2d");var n=p.new();if(g.base(n),t)try{n.load(t)}catch(t){console.error(t)}var r=h.map.new(n);r.module.message("struct-change",(function(){v()})),e.ids.map.appendChild(r),e.ids.attrs.appendChild(r.attrsDom),window.save=function(){var t=n.save(),e=(0,o.default)(t);console.log(e)};var s,u=!1,l=!1,v=(s=(0,a.default)(i.default.mark((function t(){var r;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u){t.next=3;break}return l=!0,t.abrupt("return");case 3:return t.prev=3,t.next=6,n.run();case 6:if(!(r=t.sent).image){t.next=14;break}return t.next=10,m.getImage(r.image,"canvas",{canvas:e.ids.canvas});case 10:r=t.sent,e.ids.canvas.style.display="",e.ids.canvas.style.left=-e.ids.canvas.width/2+"px",e.ids.canvas.style.top=-e.ids.canvas.height/2+"px";case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(3),console.error(t.t0);case 19:u=!1,l&&(l=!1,v());case 21:case"end":return t.stop()}}),t,this,[[3,16]])}))),function(){return s.apply(this,arguments)});v();var y=new c({scale:1});y.$listen((function(){e.ids.view.style.transform="scale3d("+y.scale+","+y.scale+",1)"})),f.domEvent(e.ids.top,"mousewheel",(function(t){t.deltaY<0&&(y.scale*=1.1),t.deltaY>0&&(y.scale/=1.1)})),this.on("dragover",(function(t){t.preventDefault()})),this.on("drop",(function(t){t.preventDefault();for(var e=event.dataTransfer.files,i=0;i<e.length;i++)if("image"==e[i].type.substr(0,5)){var a=r.module.mouse2view(t);n.addNode("image-file-select",{x:a.x,y:a.y,forms:{file:e[i]}})}})),this.css({height:"100%",width:"100%","background-color":"#444",">div":{display:"inline-block",height:"100%","vertical-align":"top",".left":{width:"calc(100% - 350px)",">div":{".top":{height:"50%",overflow:"hidden",position:"relative",">div":{position:"absolute",left:"50%",top:"50%",">canvas":{position:"absolute",border:"1px solid #777"}}},".bottom":{height:"50%","border-top":"1px solid #555"}}},".right":{width:"350px","border-left":"1px solid #555"}}})}}]),t}())||r},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){var n=[],r=function(t,e,r){r=r||{},this.__func=t,this.__class=r.class||t,n.indexOf(t)<0&&n.push(t),this.__funcID=this.__classID=n.indexOf(t),this._option=r,this._vals=e,this.__auto_render=t.auto_render,this._option.proxy&&this.proxy(this._option.proxy,!0),this._option.extends=this._option.extends||[];var a=[""];for(var o in e)a.push(e[o]);for(var o in this._option.extends)a[0]=this._option.extends[o],this.extend.apply(this,a);var s=(this._option.initTarget||t).apply(this,e);for(var o in this._option.extendsAfter=this._option.extendsAfter||[],i.Plugins.module)i.Plugins.module[o][0]!=t&&"*"!=i.Plugins.module[o][0]||this._option.extendsAfter.push(i.Plugins.module[o][1]);for(var o in this._option.extendsAfter)a[0]=this._option.extendsAfter[o],this.extend.apply(this,a);return null==this._proxy&&this.proxy(this),this.sendMessage("module-ready"),s||this._proxy};r.prototype={proxy:function(t,e){return null==t||null!=this._proxy&&!e||(this._proxy=t,t.$=t.module=t.lModule=this),this._proxy},extend:function(t){if("dom-module"==t&&(t=i.dm),"function"==typeof t){n.indexOf(t)<0&&n.push(t);var e=this.__funcID;this.__funcID=n.indexOf(t);for(var r=[],a=1;a<arguments.length;a++)r.push(arguments[a]);var o=t.apply(this,r);return this.__funcID=e,o}console.error("["+t+"]不是一个组件!")},message:function(t,e){if("string"==typeof t)null==this._msgs&&(this._msgs={}),null==this._msgs[t]&&(this._msgs[t]=[]),this._msgs[t].push(e);else for(var n in t)this.message(n,t[n])},sendMessage:function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);for(var n in null==this._msgs&&(this._msgs={}),this._msgs[t])try{this._msgs[t][n].apply(this,e)}catch(t){console.error(t)}for(var n in e.splice(0,0,t),this._msgs["*"])try{this._msgs["*"][n].apply(this,e)}catch(t){console.error(t)}},triggerHook:function(t){for(var e=this.__func.__hook||{},n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var r in null==n[0]&&(n[0]={}),e)if("*"==t||t==r||"*"==r)for(var i in e[r])"*"==r?e[r][i].apply(this,arguments):e[r][i].apply(this,n);if(n[0]&&n[0].returnValue)return n[0].returnValue},$dom:function(t){this.extend(i.dm,t)},$doms:function(t){this.extend(i.dmReact,t)}};var i=function(t){return"function"==typeof t?a(t):function(e){return a(e,t)}},a=i.bindClass=function(t,e){var n={extend:null,auto_render:!1};for(var i in e)n[i]=e[i];for(var i in r.prototype)null==t.prototype[i]&&(t.prototype[i]=r.prototype[i]);var a=function e(){for(var i=[],a=0;a<arguments.length;a++)i.push(arguments[a]);var o=e.__option||{};for(var a in delete e.__option,o.extendsAfter=o.extendsAfter||[],n.extend)o.extendsAfter.push(n.extend[a]);o.initTarget=t.prototype.init||function(){},o.class=t;var s=arguments[0],u=arguments[1],l=arguments[2],f=arguments[3],c=arguments[4],d=arguments[5],p=arguments[6],h=arguments[7],m=arguments[8],g=arguments[9],v=arguments[10],y=arguments[11],b=arguments[12],_=arguments[13],x=arguments[14],w=arguments[15],k=arguments[16],$=arguments[17],E=arguments[18];if(this==e){var O=new t(s,u,l,f,c,d,p,h,m,g,v,y,b,_,x,w,k,$,E);return O=r.call(O,e,i,o)}return o.initTarget.apply(this,arguments)};return a.new=function(){return a.apply(this,arguments)},a.option=function(t){return a.__option=t,a},a.hook=function(t,e){(a.__hook=a.__hook||{})[t]=a.__hook[t]||[],a.__hook[t].push(e)},a.auto_render=n.auto_render,a};i.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);return t.new.apply(t,e)},i.initAllFunction=function(){Function.prototype.new=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);var n=this.__option;return delete this.__option,new r(this,t,n)},Function.prototype.option=function(t){return this.__option=t,this},Function.prototype.hook=function(t,e){this.__hook=this.__hook||{},this.__hook[t]=this.__hook[t]||[],this.__hook[t].push(e)}},i.bindFunc=i.bind=function(t,e){e=e||{};return t.new=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);var n=this.__option;return delete this.__option,new r(this,t,n)},t.option=function(t){return this.__option=t,this},t.hook=function(t,e){this.__hook=this.__hook||{},this.__hook[t]=this.__hook[t]||[],this.__hook[t].push(e)},t.auto_render=e.auto_render,t},i.proto=r.prototype,t.exports=i,i.config={def_scss:!1}},function(t,e,n){var r=u(n(102)),i=u(n(4)),a=u(n(5)),o=u(n(21)),s=u(n(6));function u(t){return t&&t.__esModule?t:{default:t}}t.exports=function(t){var e=t.cloneJSON=function(t){if(!t)return t;if([Number,String,Boolean].forEach((function(e){t instanceof e&&(n=e(t))})),void 0===n)if("[object Array]"===Object.prototype.toString.call(t))n=[],t.forEach((function(t,r,i){n[r]=e(t)}));else if("object"==(void 0===t?"undefined":(0,s.default)(t)))if(t.nodeType&&"function"==typeof t.cloneNode)var n=t.cloneNode(!0);else if(t.prototype)n=t;else if(t instanceof Date)n=new Date(t);else for(var r in n={},t)n[r]=e(t[r]);else n=t;return n},n=t.getDomOffset=function(t,e){if(null==t)return{x:0,y:0};if(t.offsetParent==e||t.offsetParent==document)return{x:t.offsetLeft,y:t.offsetTop};var r=n(t.offsetParent,e);return{x:r.x+t.offsetLeft,y:r.y+t.offsetTop}};t.getMouseOffset=function(t,e){var n=t.getBoundingClientRect();return{x:e.x-n.left,y:e.y-n.top}};t.isChild=function(t,e){for(var n=e;n&&n.parentNode&&n.parentNode!=document;){if(n==t||n.parentNode==t)return!0;n=n.parentNode}return!1},num=100,t.log=function(){num--,num<=0||console.log.apply(console,arguments)};t.UUID=function(t){t=t||4;for(var e=(new Date).getTime().toString(16),n=0;n<t;n++)e+="-"+(65536*(1+Math.random())|0).toString(16).substring(1);return e};t.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)},t.delay=function(t){return new o.default((function(e){setTimeout((function(){e()}),t||1e3)}))},t.easySel=function(t,e,n){return e=e||"sel",t?e:n},t.dateFromat=function(t,e){var n={"Y+":t.getFullYear(),"y+":t.getFullYear(),"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},t.threadFunc=function(t,e,n){"function"==typeof e&&(n=e,e=null),e=e||5;for(var r=[],s=0;s<t.length;s++)r.push(t[s]);if(r.length<=0)return new o.default((function(t){t()}));var u,l,f=0,c=(u=(0,a.default)(i.default.mark((function t(){var e;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f++,e=r[0],r.splice(0,1),t.prev=3,t.next=6,n(e);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),console.error(t.t0);case 11:f--,d();case 13:case"end":return t.stop()}}),t,this,[[3,8]])}))),function(){return u.apply(this,arguments)}),d=function(){for(;;){if(r.length<=0)return l();if(f>=e)return;c()}};return setTimeout((function(){d()})),new o.default((function(t){l=t}))};var u=t.getLocalStorageKey=function(t){return window.location.host+"_"+t};t.setLocalStorage=function(t,e){var n=u(t);localStorage.setItem(n,e)},t.getLocalStorage=function(t){var e=u(t);return localStorage.getItem(e)},t.throttle=function(t,e){var n=Date.now();return function(){var i=this,a=arguments,o=Date.now();if(o-n>e){var s=(0,r.default)(a,2);s[0],s[1];t.apply(i,a),n=o}}}}},,,,,,,,,,,,,,,,,,,,function(t,e){t.exports=function(t){var e=t._events=t._events||{bind:[]};t.on=function(t,n){null==e[t]&&(e[t]=[]),e[t].push(n),"ready"==t&&1==a&&n()};var n=function(t,n){null==e[t]&&(e[t]=[]);var r=!1;(n=n||{}).$stop=function(){r=!0},n.$type=t;var i=e[t];for(var a in e[t]){i[a]||i.splice(a,1);var o=i[a](n);if(r)return o}};t.trigger=n;var r=[document];t.triggerDom=function(e,n,i,a){null==a&&(t.trigger("trigger-dom",{type:e,vals:n,target:i}),t.trigger("trigger-dom-"+e,{type:e,vals:n,target:i})),i=i||r,"[object Array]"!=Object.prototype.toString.call(i)&&(i=[i]),n=n||{};for(var o=0;o<i.length;o++){var s=i[o];s.module&&s.module.sendMessage(e,n);for(var u=s.querySelectorAll("*[lcg-dom-message]"),l=0;l<u.length;l++){var f=u[l];f.module&&f.module.sendMessage(e,n)}}},t.triggerDom.add=function(t){r.push(t)};var i,a=!1;t._ready=function(){a||(n("plugin-ready"),n("ready"),a=!0)},i=t._ready,document.addEventListener?document.addEventListener("DOMContentLoaded",(function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),i()}),!1):document.attachEvent&&document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),i())})),t.delayTime=20;!function e(){setTimeout(e,t.delayTime),n("dt"),t.triggerDom("dt")}(),t.domEvent=function(t,e,n){for(var r in"string"==typeof e&&(e=[e]),e)t.addEventListener?t.addEventListener(e[r],n,!1):t.attachEvent("on"+e[r],n)},t.domEvent(document,"mousemove",(function(e){t.wx=e.x,t.wy=e.y}))}},function(t,e,n){var r,i=n(6),a=(r=i)&&r.__esModule?r:{default:r};var o=n(123),s=n(124);t.exports=function(t){t.easycolor=o;var e={},n={ver:!1};window.CSS&&window.CSS.supports&&window.CSS.supports("--a",0),n.ver=!1,t.ICE=function(i,o,l){l=l||{};var d,p,h=this;if(this.option=l,this.key=o,l.dom&&null!=l.static){if(p=s.getJax(l.static),l.dom.setAttribute("ice-static-"+p.id,"true"),p.initEnd)return;o="static-"+p.id,d="ice-static-"+p.id,l.dom.setAttribute("ice-key",o)}else l.dom&&l.dom.setAttribute("ice-key",o);i=i||{},i=t.cloneJSON(i);var m=t.cloneJSON(i),g={},v={},y={},b=0;this.styleDom=document.createElement("style"),this.styleDom.style.display="none",this.styleDom.$$noRender=!0;var _=0;this.render=function(){if(!p||p.needRender(i,b)){var t="",n={},r={};for(var a in x(g,r),x(e,r),_=0,w(i,n,d?"["+d+"='true']":o?"[ice-key='"+o+"']":"",r),v)t+=o?"@keyframes "+o+"-"+a+"-"+b+"{"+v[a]+"}\n":"@keyframes "+a+"{"+v[a]+"}\n";for(var a in n)t+=a+"{"+n[a]+"}\n";return this.styleDom.innerHTML=t,p&&p.render(t),t}};var x=function(t,e){for(var n in t)null==e[n.length]&&(e[n.length]={}),null==e[n.length][n]&&(e[n.length][n]=t[n])};this.args=function(t){for(var e in t)g[e]=t[e];if(n.ver&&l.dom)for(var e in g)l.dom.style.setProperty("--"+e,g[e]);return this},this.clear=function(){return i={},v={},y={},this},this.refDef=function(){return i=t.cloneJSON(m),y={},this},this.extend=function(t,e){r({$:t},i,e)},this.setDef=function(t){return m=t,this},this.setKey=function(t){return o=t,this},this.rePlay=function(){return b++,this.render(),this},this.play=function(t){if(null!=(t=t||"_def")&&null!=y)for(var e in v={},y[t])this.ani(e,y[t][e]);return this.rePlay(),this},this.ani=function(t,e){var n="";for(var r in e){for(var i in n+=r+" {",e[r])n+=i+":"+e[r][i]+";";n+="}"}return v[t]=n,this};var w=function e(i,s,l,d){var p="",m=_;_++;i=t.cloneJSON(i);var g={};for(var v in i)"function"==typeof i[v]&&(g[v]=i[v],i[v]=i[v]());i.$&&r(i);var x=t.cloneJSON(d);if(i.$args)for(var v in i.$args)x[v]=i.$args[v];for(var w=function(t){if((t=t.toString()).indexOf("@")>=0)for(var e=30;e>=0;e--)for(var n in x[e])t=t.replace(new RegExp("@"+n,"g"),x[e][n]);if(t.indexOf("[")>0)for(var e in f)for(;;){var r=new RegExp("("+e+")\\[(.*?)\\]"),i=t.match(r);if(null==i||""==i||0==i.length)break;t=t.replace(r,f[i[1]].apply(f,i[2].split(",")))}return t};;){var k=!0;for(var v in i)c[v]&&(k=!1,c[v]({val:i[v],key:v,cssKey:l,dom:i,re:s,rep:w,module:h,sid:m,args:x}),delete i[v]);if(k)break}for(var v in function(t){for(var e in t.$anis&&(y._def=y._def||{},u(t.$anis,y._def,!0),delete t.$anis),t)if("$anis"==e.substr(0,5)){var n=e.substr(6);y[n]=t[e],y[n]=y[n]||{},u(t[e],y[n],!0),delete t[e]}}(i),i)if("$"!=v[0])if(null==i[v]||"object"!=(0,a.default)(i[v]))if("ani"!=v)p+=v+":"+i[v]+";";else if(o){var $=i[v].split(" ");$[0]=$[0]+"-"+b,p+="animation:"+o+"-"+$.join(" ")+";"}else p+="animation:"+i[v]+";";else{var E=l+v;v.indexOf(",")>=0&&(E=l+v.replace(/,/g,","+l)),e(i[v],s,E,t.cloneJSON(x))}if(p.indexOf("@")>=0)for(v=30;v>=0;v--)for(var O in x[v])p=n.ver?p.replace(new RegExp("@"+O,"g"),"var(--"+O+")"):p.replace(new RegExp("@"+O,"g"),x[v][O]);if(p.indexOf("[")>0)for(var v in f)for(;;){var N=new RegExp("("+v+")\\[(.*?)\\]"),C=p.match(N);if(null==C||""==C||0==C.length)break;p=p.replace(N,f[C[1]].apply(f,C[2].split(",")))}for(var v in g)i[v]=g[v];s[l]=p}};var r=t.extendJSON=function(t,e,n){e=e||t;var r=t.$;for(var i in"[object Array]"!=Object.prototype.toString.call(t.$)&&(r=[r]),r)u(r[i],e,n);e.$&&delete e.$},i=function(t){return null!=t&&(t.constructor==Array||t.constructor==Object)},u=t.copyJSON=function(e,n,o){for(var s in e)"$"!=s&&(null!=n[s]&&"object"==(0,a.default)(n[s])&&"object"==(0,a.default)(e[s])&&i(e[s])&&i(n[s])?u(e[s],n[s],o):(null==n[s]||o)&&(i(e[s])?n[s]=t.cloneJSON(e[s]):n[s]=e[s]));null!=e&&e.$&&r(e,n,o)},l=t.ICE.Color=function(t){var e={},n=o(t);return e.val=function(){return n.toString()},e.l=function(t){return n.l+=Number(t),e},e.a=function(t){return n.a+=Number(t),e},e},f={o:function(t,e){return new l(t).a(e).val()},l:function(t,e){return new l(t).l(e).val()},h:function(t,e){var n=o(t);return n.v+=Number(e),n.toString()}};t.ICE.args=function(t){if(-1==t)return e={};for(var r in t)e[r]=t[r];if(n.ver)for(var r in e)document.documentElement.style.setProperty("--"+r,e[r]);return e};var c={};t.ICE.key=function(t,e){if("string"==typeof t){var n={};n[t]=e,t=n}for(var r in t)c[r]=t[r]},t.ICE.render=function(){t.ICE.Static.clear(),t.triggerDom("lcg-css-render")},t.ICE.easycolor=o,t.ICE.Static=s}},function(t,e,n){var r=a(n(44)),i=a(n(6));function a(t){return t&&t.__esModule?t:{default:t}}!function(){function e(t,e){return t.map((function(n,r){return t[r]+e[r]}))}function n(t,e){return t.map((function(t){return t*e}))}function a(t,e){return t.map((function(t){return t/e}))}function o(t){return new RegExp("^"+function t(e,n){if(n in O)return e;var r=e.replace(new RegExp(C.join("|"),"g"),(function(e){return e in O?O[e]:t(N[e].source,e)}));return O[n]=r,r}(E[t].source,t)+"$","i")}function s(t,e){return null==t?null:N[e].exec(t)}function u(t){return Math.min(255,Math.max(0,Number(t)))}function l(t){var e="string"==typeof t&&"%"===t[t.length-1]?t.slice(0,-1):t;return Math.min(100,Math.max(0,Number(e)))}function f(t){return"string"==typeof t&&(-1!==t.indexOf("deg")?t=t.slice(0,-3):-1!==t.indexOf("grad")?t=360*t.slice(0,-4)/400:-1!==t.indexOf("rad")?t=360*t.slice(0,-3)/2/Math.PI:-1!==t.indexOf("turn")&&(t=360*t.slice(0,-4))),Number(t)}function c(t){return u(parseInt(t,16))}function d(t){var e=Math.round(t).toString(16);return e.length<2?"0"+e:e}function p(t,e){return e=Number("1e"+e),Math.round(t*e)/e}function h(t,e){return p(100*t/255,e)}function m(t,e,n){var r=Math.max(Math.max(t,e),n),i=r-Math.min(Math.min(t,e),n);if(0===i)return 0;switch(r){case t:return(e-n)/i*60+(e>=n?0:360);case e:return(n-t)/i*60+120;case n:return(t-e)/i*60+240}}function g(t,e,n){t/=255,e/=255,n/=255;var r,i=Math.max(Math.max(t,e),n),a=Math.min(Math.min(t,e),n),o=i-a,s=i+a;return r=s/2,{h:m(t,e,n),s:100*(0===s||0===o?0:.5>=r?o/s:o/(2-s)),l:100*r}}function v(t,e,n){t/=255,e/=255,n/=255;var r=Math.max(Math.max(t,e),n),i=Math.min(Math.min(t,e),n);return{h:m(t,e,n),s:100*(0===r?0:1-i/r),v:100*r}}function y(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1>6*n?t+(e-t)*n*6:1>2*n?e:2>3*n?t+(e-t)*(2/3-n)*6:t}function b(t,e,n){e/=100;var r=.5>=(n/=100)?n*(e+1):n+e-n*e,i=2*n-r;return{r:255*y(i,r,(t/=360)+1/3),g:255*y(i,r,t),b:255*y(i,r,t-1/3)}}function _(t,e,n){0>(t%=360)&&(t+=360),e/=100,n/=100;var r,i,a,o=Math.floor(t/60)%6,s=t/60-o,u=n*(1-e),l=n*(1-s*e),f=n*(1-(1-s)*e);switch(o){case 0:r=n,i=f,a=u;break;case 1:r=l,i=n,a=u;break;case 2:r=u,i=n,a=f;break;case 3:r=u,i=l,a=n;break;case 4:r=f,i=u,a=n;break;case 5:r=n,i=u,a=l}return{r:255*r,g:255*i,b:255*a}}function x(t,e){if(t instanceof x)return t.clone();if(!(this instanceof x))return new x(t,e);var n={};(e=e||{}).type in w&&(n.type=e.type),void 0!==e.percentage&&(n.percentage=Boolean(e.percentage));var r,a,o,d=!1;"string"==typeof t&&("transparent"===t?(a="transparent",t={r:0,g:0,b:0,a:0}):t in k?(a="keyword",t={r:(t=k[t]).slice(0,2),g:t.slice(2,4),b:t.slice(4,6)}):(o=s(t,"rgb"))?(a="rgb",t={r:o[1],g:o[2],b:o[3]}):(o=s(t,"rgbpercent"))?(a="rgb",d=!0,t={r:o[1],g:o[2],b:o[3]}):(o=s(t,"rgba"))?(a="rgb",t={r:o[1],g:o[2],b:o[3],a:o[4]}):(o=s(t,"rgbapercent"))?(a="rgb",d=!0,t={r:o[1],g:o[2],b:o[3],a:o[4]}):(o=s(t,"hex3"))?(a="hex",t={r:o[1]+o[1],g:o[2]+o[2],b:o[3]+o[3]}):(o=s(t,"hex6"))?(a="hex",t={r:o[1],g:o[2],b:o[3]}):(o=s(t,"hex4"))?(a="hex",t={r:o[1]+o[1],g:o[2]+o[2],b:o[3]+o[3],a:o[4]+o[4]}):(o=s(t,"hex8"))?(a="hex",t={r:o[1],g:o[2],b:o[3],a:o[4]}):(o=s(t,"hsl"))?(a="hsl",t={h:o[1],s:o[2],l:o[3]}):(o=s(t,"hsla"))?(a="hsl",t={h:o[1],s:o[2],l:o[3],a:o[4]}):(o=s(t,"hsv"))?(a="hsv",t={h:o[1],s:o[2],v:o[3]}):(o=s(t,"hsva"))&&(a="hsv",t={h:o[1],s:o[2],v:o[3],a:o[4]}));if(function(t){return"[object Array]"===Object.prototype.toString.apply(t)}(t)&&t.length>=3){var p=t;t="hsl"===(a=n.type?n.type:"rgb")?{h:p[0],s:p[1],l:p[2]}:"hsv"===a?{h:p[0],s:p[1],v:p[2]}:{r:p[0],g:p[1],b:p[2]},p.length>3&&(t.a=p[3])}void 0===a&&"object"==(void 0===t?"undefined":(0,i.default)(t))&&(s(t.r,"number")&&s(t.g,"number")&&s(t.b,"number")?a="rgb":s(t.r,"percent")&&s(t.g,"percent")&&s(t.b,"percent")?(a="rgb",d=!0):s(t.h,"hue")&&s(t.s,"unit")&&s(t.l,"unit")?a="hsl":s(t.h,"hue")&&s(t.s,"unit")&&s(t.v,"unit")&&(a="hsv")),"transparent"===a?r=t:"hex"===a||"keyword"===a?(r={r:c(t.r),g:c(t.g),b:c(t.b)},t.a&&(t.a=c(t.a)/255)):"rgb"===a?r=!0===d?{r:l(t.r)/100*255,g:l(t.g)/100*255,b:l(t.b)/100*255}:{r:u(t.r),g:u(t.g),b:u(t.b)}:"hsl"===a?r=b(f(t.h),l(t.s),l(t.l)):"hsv"===a&&(r=_(f(t.h),l(t.s),l(t.v))),void 0===r?r={r:0,g:0,b:0,a:1}:r.a=s(t.a,"unit")?function(t){return"%"===t[t.length-1]&&(t=l(t)/100),Math.min(1,Math.max(0,Number(t)))}(t.a):1,"rgb"!==a||n.type||(n.type="hex"),this._val=r,this._type=n.type||a||"hex",this._percentage=void 0===n.percentage?d:Boolean(n.percentage)}var w={transparent:!0,keyword:!0,hex:!0,rgb:!0,hsl:!0,hsv:!0},k={black:"000000",silver:"c0c0c0",grey:"808080",gray:"808080",white:"ffffff",maroon:"800000",red:"ff0000",purple:"800080",fuchsia:"ff00ff",green:"008000",lime:"00ff00",olive:"808000",yellow:"ffff00",navy:"000080",blue:"0000ff",teal:"008080",aqua:"00ffff",orange:"ffa500",aliceblue:"f0f8ff",antiquewhite:"faebd7",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",blanchedalmond:"ffe4c4",bisque:"ffe4c4",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgrey:"a9a9a9",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategrey:"2f4f4f",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgrey:"696969",dimgray:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgray:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategrey:"778899",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",limegreen:"32cd32",linen:"faf0e6",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",oldlace:"fdf5e6",olivedrab:"6b8e23",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",skyblue:"87ceeb",slateblue:"6a5acd",slategrey:"708090",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",whitesmoke:"f5f5f5",yellowgreen:"9acd32",rebeccapurple:"663399"},$=function(t){var e,n={};for(e in t)n[t[e]]=e;return n}(k),E={number:/(?:[-+]?(?:\d*\.)?\d+(?:e[-+]?\d+)?)/,percent:/(?:number%)/,angle:/(?:number(?:deg|grad|rad|turn))/,unit:/(?:number|percent)/,hue:/(?:number|angle)/,rgb:/rgb\(\s*(number)[,\s]+(number)[,\s]+(number)\s*\)/,rgbpercent:/rgb\(\s*(percent)[,\s]+(percent)[,\s]+(percent)\s*\)/,rgba:/rgba\(\s*(number)[,\s]+(number)[,\s]+(number)(?:[,\s]*\/[,\s]*|[,\s]+)(unit)\)/,rgbapercent:/rgba\(\s*(percent)[,\s]+(percent)[,\s]+(percent)(?:[,\s]*\/[,\s]*|[,\s]+)(unit)\)/,hsl:/hsl\(\s*(hue)[,\s]+(percent)[,\s]+(percent)\s*\)/,hsla:/hsla\(\s*(hue)[,\s]+(percent)[,\s]+(percent)(?:[,\s]*\/[,\s]*|[,\s]+)(unit)\s*\)/,hsv:/hs(?:v|b)\(\s*(hue)[,\s]+(percent)[,\s]+(percent)\s*\)/,hsva:/hs(?:v|b)a\(\s*(hue)[,\s]+(percent)[,\s]+(percent)(?:[,\s]*\/[,\s]*|[,\s]+)(unit)\s*\)/,hex1:/[0-9a-f]/,hex2:/[0-9a-f]{2}/,hex3:/#(hex1)(hex1)(hex1)/,hex4:/#(hex1)(hex1)(hex1)(hex1)/,hex6:/#(hex2)(hex2)(hex2)/,hex8:/#(hex2)(hex2)(hex2)(hex2)/},O={number:E.number.source,hex1:E.hex1.source,hex2:E.hex2.source},N={},C=["number","hex1","hex2","percent","angle","unit","hue"];for(key in E)N[key]=o(key);x.random=function(){return x({r:Math.floor(256*Math.random()),g:Math.floor(256*Math.random()),b:Math.floor(256*Math.random())})},x.interpolation=function(t,n,r){if(!(t instanceof x&&n instanceof x))throw new TypeError;if(!r)return[];var i=[t.clone()];if(1===r)return i;for(var o=a(function(t,e){return t.map((function(n,r){return t[r]-e[r]}))}(n.getValue(),t.getValue()),r-1),s=1;r-2>=s;s++)i.push(x(e(i[i.length-1].getValue(),o)));return i.push(n.clone()),i},x.interpolation2d=function(t,e,n,r,i,a){if(!(t instanceof x&&e instanceof x&&n instanceof x&&r instanceof x))throw new TypeError;if(!i||!a)return[];if(1===i&&1===a)return[[t.clone()]];if(1===a)return[x.interpolation(t,r,i)];if(1===i)return x.interpolation(t,r,a).map((function(t){return[t]}));var o=x.interpolation(t,n,a),s=x.interpolation(e,r,a);return o.map((function(t,e){return x.interpolation(o[e],s[e],i)}))},x.mixAlpha=function(t,r){var i=t.a,o=r.a,s=t.getValue(),u=r.getValue(),l=i+o-i*o,f=a(e(n(s,i),n(u,o*(1-i))),l);return x({r:f[0],g:f[1],b:f[2],a:l})},[{name:"red",key:"r"},{name:"r",key:"r"},{name:"green",key:"g"},{name:"g",key:"g"},{name:"blue",key:"b"},{name:"b",key:"b"}].forEach((function(t){(0,r.default)(x.prototype,t.name,{get:function(){return Math.round(this._val[t.key])},set:function(e){s(e,"number")?this._val[t.key]=u(e):s(e,"percent")?this._val[t.key]=l(e)/100*255:this._val[t.key]=0}})})),["hue","h"].forEach((function(t){(0,r.default)(x.prototype,t,{get:function(){var t=this._val;return p(m(t.r,t.g,t.b),3)},set:function(t){var e=this._val,n=g(e.r,e.g,e.b);s(t,"hue")?n.h=f(t):n.h=0,this._val=b(n.h,n.s,n.l),this._val.a=e.a}})})),[{name:"satarate",key:"s"},{name:"s",key:"s"},{name:"light",key:"l"},{name:"l",key:"l"}].forEach((function(t){(0,r.default)(x.prototype,t.name,{get:function(){var e=this._val;return p(g(e.r,e.g,e.b)[t.key],3)},set:function(e){var n=this._val,r=g(n.r,n.g,n.b);s(e,"unit")?r[t.key]=l(e):r[t.key]=0,this._val=b(r.h,r.s,r.l),this._val.a=n.a}})})),["bright","v"].forEach((function(t){(0,r.default)(x.prototype,t,{get:function(){var t=this._val;return p(v(t.r,t.g,t.b).v,3)},set:function(t){var e=this._val,n=v(e.r,e.g,e.b);s(t,"unit")?n.v=l(t):n.v=0,this._val=_(n.h,n.s,n.v),this._val.a=e.a}})})),["alpha","a"].forEach((function(t){(0,r.default)(x.prototype,t,{get:function(){return p(this._val.a,3)},set:function(t){s(t,"number")?this._val.a=u(t):s(t,"percent")?this._val.a=l(t)/100:this._val.a=1}})})),function(t,e){var n;for(n in e){if(!e.hasOwnProperty(n))return;t[n]=e[n]}}(x.prototype,{toString:function(t){var e=this._val,n=t in w&&t||this._type,r=this._percentage;if("transparent"===n){if(0===e.a)return"transparent";n="hex"}if("keyword"===n){var i=d(e.r)+d(e.g)+d(e.b);if(1===e.a&&i in $)return $[i];n="hex"}return"hex"!==t&&"hex"===n&&1!==e.a&&(n="rgb"),"rgb"===n?r?this.toRgbPercentString():this.toRgbString():"hsl"===n?this.toHslString():"hsv"===n?this.toHsvString():"hex"===n?this.toHexString():void 0},toRgbString:function(){return 1===this._val.a?"rgb("+this.r+","+this.g+","+this.b+")":"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"},toRgbPercentString:function(){var t=this._val;return 1===t.a?"rgb("+h(t.r,3)+"%,"+h(t.g,3)+"%,"+h(t.b,3)+"%)":"rgba("+h(t.r,3)+"%,"+h(t.g,3)+"%,"+h(t.b,3)+"%,"+this.a+")"},toHslString:function(){var t=this._val,e=g(t.r,t.g,t.b);return 1===t.a?"hsl("+p(e.h,3)+","+p(e.s,3)+"%,"+p(e.l,3)+"%)":"hsla("+p(e.h,3)+","+p(e.s,3)+"%,"+p(e.l,3)+"%,"+this.a+")"},toHsvString:function(){var t=this._val,e=v(t.r,t.g,t.b);return 1===t.a?"hsv("+p(e.h,3)+","+p(e.s,3)+"%,"+p(e.v,3)+"%)":"hsva("+p(e.h,3)+","+p(e.s,3)+"%,"+p(e.v,3)+"%,"+this.a+")"},toHexString:function(){var t=this._val;return 1===t.a?"#"+d(t.r)+d(t.g)+d(t.b):"#"+d(t.r)+d(t.g)+d(t.b)+d(255*t.a)},toKeyword:function(){var t=this._val,e=d(t.r)+d(t.g)+d(t.b);return e in $?$[e]:""},getValue:function(){var t=this._val;return[t.r,t.g,t.b,t.a]},grayed:function(){var t=this._val,e=.3*t.r+.58*t.g+.11*t.b;return x({r:e,g:e,b:e,a:t.a})},inverting:function(){var t=this._val;return x({r:255-t.r,g:255-t.g,b:255-t.b})},interpolation:function(t,e){return x.interpolation(this,t,e)},interpolation2d:function(t,e,n,r,i){return x.interpolation2d(this,t,e,n,r,i)},mixAlpha:function(t){return x.mixAlpha(this,t)},clone:function(){return x(this._val,{type:this._type,percentage:this._percentage})}}),t.exports?t.exports=x:window.easycolor=x}()},function(t,e,n){var r,i=n(43),a=(r=i)&&r.__esModule?r:{default:r};var o=t.exports={},s={};o.clear=function(){for(var t in s)s[t].clear()};var u=document.createElement("style");document.head.appendChild(u);o.getJax=function(t){return null==s[t]&&(s[t]=new l(t)),s[t]};var l=function(t){var e=this;this.id=t;var n="",r=null,i={};this.clear=function(){i={}},this.str=function(){return n},this.render=function(t,a){if(n!=t)return n=t,i[a||r]=n,function(){var t="";for(var e in s)t+=s[e].str()+"\n";u.innerHTML=t}(),e.initEnd=!0,!1},this.className="lcg-ice-class-key-"+t,this.initEnd=!1,lastAniKey=-1,this.needRender=function(t,n){var o="";try{o=(0,a.default)(t)}catch(t){}return i[o]&&lastAniKey>=n?(e.render(i[o],o),!1):(lastAniKey=n,r=o,!0)}}},function(t,e,n){var r,i=n(6),a=(r=i)&&r.__esModule?r:{default:r};var o=n(126);t.exports=function(t){var e=1926;t.dm=function(i){var a=this;i.$$typeof&&(i=t.render(i)),i.$$type&&(i=t.$r(i)),"function"==typeof i&&(this.$render=i,i=null,this.$r=this.render=function(){var e=a.$render();return t.$r(e,i)},i=this.$r());a=this;if(!this.__hasDomModule){this.__hasDomModule=!0;var s=a._dmid=e;for(var u in e++,this.proxy(i),this.extend(r),a.attr(this._option.prefabAttr),this.attr({"lcg-dom-message":!0}),this._proxy._vueData){var l={data:this._proxy._vueData||{}};l.el=l.el||this._proxy,this._vue=new o(l);break}this._proxy.ids=this.ids={}||this._proxy.ids,this._proxy.message=a.message.bind(a),a.for((function(t){if(t.getAttribute("dom-slot")&&a._option.prefabDom){var e=a._option.prefabDom.childNodes,r=[];for(a._option.prefabDom._childNodes=r;e.length>0;)r.push(e[0]),t.appendChild(e[0])}if(t._prefab){var i=t.getAttribute("lid");return i&&null==a.ids[i]&&(a.ids[i]=t),t._prefab}var o=n(t).attr("lid");o&&null==a.ids[o]&&(a.ids[o]=t)}));var f=!1;return this.csss=this.css=function(e,n,r){if(null==e)return this._css;if(!this._css||r){if(this._css=this._css||new t.ICE(e,"dm-"+s,{dom:a._proxy,static:r?this.__funcID:null}),!this._css||!this._css.render)return;this._css.args(n),0==f&&this.message("lcg-css-render",(function(){a._css.render()})),r?(this._css.extend(e,!0),0==f&&this.message("module-ready",(function(){a._css.render(),a._css.play()}))):(this._proxy.appendChild(this._css.styleDom),this._css.render(),this._css.play()),f=!0}else this._css.extend(e,!0),this._css.args(n),this._css.render(),this._css.play();return this._css},this.scss=function(t,e){return this.csss(t,e,!0)},t.config.def_scss&&(this.css=this.scss,this.scss=this.csss),this._vue}};var n=t.$=function(t){return r.new(t)},r=t.dm.domFac=function(e){e=e||this._proxy,this.for=function(t){n(t,e)};var n=function t(e,n){if("#text"!=n.nodeName){var r=e(n);if(0!=r){if(null!=r)return t(e,r);for(var i=n._childNodes||n.childNodes,a=0;a<i.length;a++)t(e,i[a])}}};this.attr=function(t,n){var i=r();if(null==t&&null==n)return i;if("string"==typeof t&&"undefined"==String(n))return i[t];if("string"==typeof t)return"function"!=typeof n?e.setAttribute(t,n):e[t]=n;for(var o in t)null==t[o]||"function"!=typeof t[o]&&"object"!=(0,a.default)(t[o])?e.setAttribute(o,t[o]):e[o]=t[o]};var r=function(){for(var t={},n=e.attributes,r=0;r<n.length;r++)t[n[r].name]=n[r].value;return t};this.addClass=function(t){e.classList.add(t)},this.removeClass=function(t){e.classList.remove(t)},this.style=function(t,n){var r=i();if(null==t&&null==n)return r;if("string"==typeof t&&"undefined"==String(n))return r[t];if("string"==typeof t)return e.style[t]=n;for(var a in t)e.style[a]=t[a]};var i=function(){return window.getComputedStyle(e,null)};this.on=function(e,n){t.domEvent(this._proxy,e,n.bind(this))},this.destory=this.remove=function(){var n=this;try{var r={delay:0,target:e};this.sendMessage&&this.sendMessage("destory",r),t.triggerDom("destory",r,e),r.delay>0?setTimeout((function(){n._proxy.parentNode.removeChild(n._proxy)}),r.delay):this._proxy.parentNode.removeChild(this._proxy)}catch(r){console.error(r)}}};r=t.bindFunc(r)}},function(t,e,n){var r,i,a,o,s,u,l,f,c,d,p,m,g,v,y,b,_,x,w,k,$=N(n(44)),E=N(n(43)),O=N(n(6));function N(t){return t&&t.__esModule?t:{default:t}}i=function(t,e,n){if("string"==(e=void 0===t?"undefined":(0,O.default)(t)))return 1;if("boolean"==e)return 2;if("number"==e)return 3;if(t instanceof Array)return 4;if("object"==e)for(n in t)return 5;return"{}"==(0,E.default)(t)?5:0},a=function(t,e,n){for(n=e.length;n--&&t!=e[n];);return n},o=function(t,e,n,r,i,a){for(r=[],i=t.length,a=0,!n&&(n=i);e<n;)r[a]=t[e],e++,a++;return r},s=function(t,e,n,r,i,a,o,s){for(r=t.length,i=0,a="",o=".",n!=s&&(r=n);i<r;)i==r-1&&(o=""),a+=e?t[i]:t[i]+o,i++;return a},u={$_a:1,$_b:1,$_c:1,$_d:1,$_e:1,$_f:1,$_g:1,$_h:1,$_i:1,$_j:1,$_k:1,$_l:1,$_m:1,$_n:1,$_o:1,$_p:1},l=function t(e,n,r,i,a,o,s,l){for(s in n)(l=n[s])instanceof Array?(e[s]=[],f(e[s],l,r,i,a,o)):u[s]||(e[s]={},t(e[s],l,r,i,a,o))},f=function(t,e,n,r,i,a,o,s,f,c,d){for(o=e.length;o--;){if(f=e[o],t[o]={},t[o].$_a=f.$_a,t[o].$_b=f.$_b,t[o].$_d=n[f.$_c],t[o].$_h=n[f.$_i],t[o].$_e=n[f.$_g],t[o].$_f=f.$_f,t[o].$_j=n[f.$_k],t[o].$_l=n[f.$_m],f.$_p)for(s=(c=f.$_p).length;s--;)(d=n[f.$_o]).$_items=a,d.$_cache=a.$_cache,d.$_gData=a.$_gData,i.push(d),d[c[s][0]]=r[c[s][1]];for(s in f)u[s]||(t[s]={},l(t[s],f,n))}},c=function t(e,n,r,i,a,o,s,u,l){if(u=0,l=0,n||(n={},r=[]),a=e.nodeName,n.a={},n.a.a=a,n.a.b=function(t,e,n,r){if(t){if(n=[],e=t.length){for(;e--;)r=t[e].name,p[3].test(r)||n.push([t[e].name,t[e].value]);return n}return 0}}(e.attributes),r.push(e),i=e.childNodes){for(a=i.length,n.b=[];l<a;)1===(o=i[l].nodeType)&&(n.b[u]={},t(i[l],n.b[u],r),u++),3===o&&(s=i[l].textContent.trim())&&(s=s.replace(p[1],""),n.b[u]=s,u++,r.push(i[l])),l++;return[n,r]}},d=function t(e,n,r,a,o,s,u,l){if(s=e.b,o=e.a.a,u=document.createElement(o),o=e.a.b)for(l=o.length;l--;)u.setAttribute(o[l][0],o[l][1]);if(a?n.appendChild(u):r=[],r.push(u),s){for(l=s.length,a=0;a<l;)o=s[a],1==i(o)?(e=document.createTextNode(o),r.push(e),u.appendChild(e)):t(o,u,r,1),a++;return[u,r]}},p=[/(\{\{[^{}]+\}\})/,/(\{\{[^{}]+\}\})/g,/({{|}})/g,/^(e\-)/,/(\>\=|\<\=|\>|\<|\=\=\=|\=\=|\=)/],m={"=":0,"==":0,"===":0,">=":1,"<=":2,">":3,"<":4},g=function(t){var e=function(t){for(var e,n,r,i,a,o=[],s=t.length,u=0,l="",f=1;u<s;)if(e=t[u],f&&"="==e)o.push(l),o.push(e),l="",f=0,n=1,u++;else if(n&&"?"==e){for(i=(l=l.split(p[4])).length,a=0;a<i;)o.push(l[a]),a++;l="",n=0,o.push(e),r=1,i=++u}else{if(r&&")"==e&&":"==t[u+1]){o.push(t.slice(i+1,u)),o.push(":"),o.push(t.slice(u+3,-1));break}l+=e,++u==s&&o.push(l)}return o}(t),n=e.length,r=0,i=[];if(n>2){for(n=e.length,i.push(e[2].replace(p[2],"").trim()),9==n&&i.push(m[e[3]]);r<n;)r%2||2==r||i.push(e[r].trim()),r++;return i}},v=function(t,e,n,r,i){if((r=t.getAttribute(_[3]))&&(r=r.trim(),t.removeAttribute(_[3]),r&&(r=function(t,e,n,r,i){for(r=[],n=(e=t.split(";")).length;n--;)(i=g(e[n]))&&r.push(i);if(r.length)return r}(r))))for(i=r.length;i--;)e[r[i][0]]||(e[r[i][0]]=[]),e[r[i][0]].push({$_e:n?null:t,$_g:n?a(t,n):null,$_f:o(r[i],0)})},y=function(t,e,n,r){return(r=t.getAttribute(_[2]))&&(r=r.trim(),t.removeAttribute(_[2]),r)?(e[r]||(e[r]=[]),e[r].push({$_h:n?null:t,$_i:n?a(t,n):null}),0):1},b={"e-input":"$_j","e-change":"$_l","e-event":"$_n",$_j:"$_k",$_l:"$_m",$_n:"$_o"},_=["e-id","e-base","e-html","e-attr","e-for","prototype"],x=function(t,e,n,r,i,o,s,u,l,f,c,d,p,h,m,g,v,y){for(d=(h=t.attributes).length;d--;)if(l=(u=h[d]).name,m=0,(c=b[l])&&(f=u.value.trim(),t.removeAttribute(l),f)){if("$_n"==c){if(1==r)continue;for(v=[],m=1,g=(y=f.split(";")).length;g--;)v[g]=y[g].split(":")}if(m&&n||!m)e[f]||(e[f]=[]),(p={})[c]=n?null:t,p[b[c]]=n?a(t,n):null,m&&(p.$_p=v),e[f].push(p);else for(t.$_data=i,t.$_cache=o.$_cache,t.$_gData=o.$_gData,t.$_items=o,g=v.length;g--;)t[v[g][0]]=s[v[g][1]]}},w=function(t,e){return(e=document.createElement("div")).innerHTML=t.trim(),(e=e.childNodes)[0]},(k=function t(e,n,r,a,o,s,u){return(n=this).p=1,n.q=-1,n.r={},n.s=[],n.t=[0,1,2,3],n.u=[],n.v=e.cache||{},n.w=[[]],n.x=e.data||{},n.y=e.event||{},n.N=e.relate,n.a(),n.z={$_id:e.id,$_relate:[],$_ajax:n.P,$_require:t.g,$_newData:t.e,$_addData:n.Q,$_gData:n.x,$_caller:0,$_setToSelf:n.A,$_setToGlobal:n.B,$_watcher:n.C,$_event:n.y,$_watcherFor:n.D,$_cache:n.v},t.c(n.z),t.a.push(n.x,n,e.id),n.L=1,n.M(),n.E={},a=0,o=e.showStage,s=e.created,u=e.g,h=e.template,r=[],n.O={},n.O.a=s,n.O.b=1,n.O.c=1,h&&(a=1,n.z.$_el=w(h),n.c(n.z.$_el,n.r,"",0,n.x)),e.el&&(1==i(e.el)?(e.el=document.getElementById(e.el),a?u&&u.css||e.el.appendChild(n.z.$_el):(n.z.$_el=e.el,n.c(e.el,0,"",0,n.x))):a?(!u||!u.css)&&e.el.appendChild(n.z.$_el):(n.z.$_el=e.el,n.c(e.el,0,"",0,n.x))),e.watcher&&n.b(e.watcher,1),e.watcherFor&&n.b(e.watcherFor),n.x&&n.f(n.x,r,1),!e.x&&e.ajax&&(n.O.b=0,n.P(e.ajax,n.z)),r=null,n.L=0,u&&(u.css&&new t.g(u.css,0,(function(){e.el.appendChild(n.z.$_el),o&&o(n.z,n.v)})),u.js&&(n.O.c=0,new t.g(u.js,"js",(function(){n.O.c=1,n.O.b&&s&&s(n.z,n.v)})))),n.O.c&&n.O.b&&s&&s(n.z,n.v),n.x}).a=[],k.b=1,k.c=function(t,e){e=t.$_caller,Object.defineProperty(t,"$_caller",{set:function(t){k.b=(e=t)?0:1},get:function(){return e}})},k[_[5]].P=function(t,e){k.d(t,e)},k.init=function(t,e,n,r,i,a){for(e in a="$_sharedData",t)e!=a&&(n=window["$_"+e],r=t[e],n&&r&&n(r));(i=t[a])&&k.f(i)},k.addStyle=function(t,e){t&&((e=document.createElement("style")).innerText=t,document.head.appendChild(e))},k.e=function(t){return JSON.parse((0,E.default)(t))},k.f=function(t,e,n,r){e={m:localStorage,a:{},b:{},c:function(){for(var t,e=this,n=[e.m.$_eng_cj_cache,e.m.$_eng_d_cache],r=2;r--;)if(t=n[r])try{t=JSON.parse(t),r?e.b=t:e.a=t}catch(t){}},d:function(){var t=this;t.m.$_eng_cj_cache=(0,E.default)(t.a),t.m.$_eng_d_cache=(0,E.default)(t.b)},e:function(){this.a={},this.b={}},f:function(t,e){return e?this.b[t]:this.a[t]},g:function(t,e,n){n?this.b[t]=e:this.a[t]=e}},n=function(t,n){if(t){var r,i,a,o,s,u,l=t.split("="),f=1,c=1;if(i=(r=l[0].split(".")).length,t=r[0],a=(u=k.a.indexOf(t))>0?k.a[u-1].z.$_gData:0){for(n||(i-=1);f<i;){if(!(a=a[r[f]])){if(n){c=0;break}a[r[f]]={},a=a[r[f]]}f++}c&&(n?(e.b["$"+t]||(e.b["$"+t]={}),(o=e.b["$"+t])[l[0]]=a):(o=l[1].split(".")[0],(s=e.b["$"+o])&&(a[r[i]]=s[l[1]])))}}},r=function(r){var i,a,o,s,u,l,f=["<=>","=>","<?>","?>"],c=4;for(r||(f[1]="=",f[3]="?=",e.c());c--;)if(i=t[f[c]])for(i instanceof Array||(i=[i]),a=i.length;a--;)if(o=i[a],c<2&&(l=(u=k.a.indexOf(o))>0?k.a[u-1].z.$_gData:0),r)c>1?n(o,1):e.g(o,l,1);else if(c>1)n(o);else if((s=e.f(o,1))&&l)for(u in s)l[u]=s[u];r&&e.d()},e.e(),r(),window.addEventListener("focus",(function(){r()})),window.addEventListener("blur",(function(){e.e(),r(1)}))},k.d=function(t,e){var n,r,i,a,o,s,u,l,f=new XMLHttpRequest;n=(n=t.type||"get").toLowerCase(),r=(r=t.dataType||"json").toLowerCase(),i=t.url||"/eng-data",a=t.async||!0,o=t.data,l=(0,E.default)(o),f.open(n,i+("post"!=n&&o?"?"+l:""),a),f.setRequestHeader("Content-type","application/"+r),f.send("post"==n?l:""),f.onreadystatechange=function(){4==f.readyState&&(200==(u=f.status)||304==u?(s=f.responseText,t.success&&t.success("json"==r?JSON.parse(s):s,e)):t.error&&t.error(u,e))}},(k.g=function(t,e,n){var r,i=this,a=t instanceof Array,o=i.constructor;t&&(i.i=n,a?i.b=t:(i.b=[],i.b.push(t)),i.c=i.b.length,i.g=0,i.k=document.getElementsByTagName("head")[0],"js"==e?(i.l="script",i.o="text/javascript",i.m="type",i.n="src"):(i.l="link",i.o="stylesheet",i.m="rel",i.n="href"),o.a||(o.a=[]),i.e=o.a,(r=i.e).push(i),1==r.length&&i.p())})[_[5]].p=function(){var t,e=this;(t=document.createElement(e.l))[e.m]=e.o,t[e.n]=e.b[e.g],e.k.appendChild(t),t.onload=function(){e.g++,e.g==e.c&&e.i?(e.i(),e.e.splice(0,1),e.e[0]&&e.e[0].p()):e.p()},t.onerror=function(){e.g++,e.g!=e.c?e.p():(e.i(),e.e.splice(0,1),e.e[0]&&e.e[0].p())},t=0},k.h=function(){window.addEventListener("storage",(function(t){var e,n,r="$_eng_d_cache";t.key==r&&(e=t.newValue,(n=localStorage)[r]!=e&&(n[r]=e))}))},k.h(),k[_[5]].M=function(t,e,n,r,i,a,o,s,u){if(e=(t=this).N,r=k.a,e)for(i=e.length;i--;)n=e[i],(a=r.indexOf(n))>-1&&(e.splice(e.indexOf(n),1),e.length||(t.N=0),s=(o=t.z).$_id,u=r[a-1].z,o[n]=u,u[s]=o,(a=o.$_relate.indexOf(n))<0&&o.$_relate.push(n),(a=u.$_relate.indexOf(s))<0&&u.$_relate.push(s));if(t.L)for(i=r.length;i--;)(n=r[--i])!=t&&n.M(),i--},k[_[5]].a=function(){var t=this;t.A=function(e,n,r,a){return r={},a=1==i(n)?w(n):n,t.c(a,r,"",1),t.f(e,[],0,r,e),r=null,a},t.B=function(e,n,r,a,s,u,l,f,c,d){if(n=t.r,r=t.x,c=e.key,d=e.data,a=i(e.el),u=e.base?e.base.trim():"",1==a&&(e.el=w(e.el)),u){for(f=0,l=(s=u.split(".")).length;f<l;)n=n[s[f]],r=r[s[f]],f++;a=i(d),t.t[a]||(n[c]={},n=n[c],u+="."+c),s.push(c)}else s=[c],u=c,n[c]={},n=n[c];return r[c]=d,t.c(e.el,n,u,2,d),t.i(r,c,o(s,0),u,5),t.f(r[c],s,2),n=null,r=null,e.el},t.Q=function(e,n){n=[],t.x=e,t.z.$_gData=e,t.O.b=1,t.f(e,n,1),t.O.c&&t.O.a&&t.O.a(t.z,t.v),n=null},t.C=function(e){t.b(e,1)},t.D=function(e){t.b(e)}},k[_[5]].b=function(t,e,n,r,i){for(e in r=this,e?(r.F||(r.F={}),r=r.F):(r.G||(r.G={}),r=r.G),t)(n=t[e])!==i&&(r[e.trim()]=n)},k[_[5]].c=function(t,e,n,r,i,u,l,f,c,d,h,m,g,v,y,b,_,x,w){if(t&&(l=(u=t.childNodes).length,x=this,!e&&(n=(e=x.d(t,x.r,n,r,i))[1],i=e[2],e=e[0]),l))for(c=0,_=e;c<l;){if(3==(d=(t=u[c])?t.nodeType:-1)){if((g=(h=t.nodeValue.trim().split(p[1])).length)>1){for(w=o(h,0),v=0,y=[],b=[];v<g;)p[1].test(h[v])&&(y.push(v),m=h[v].replace(p[2],""),h[v]=m,w[v]="",b.push(m)),v++;for(t.nodeValue=s(w,1),g=b.length,v=0;v<g;)_[b[v]]||(_[b[v]]=[]),_[b[v]].push({$_d:x.H?null:t,$_c:x.H?a(t,x.I):null,$_a:y,$_b:h}),v++}}else 1==d&&(m=x.d(t,_,n,r,i),x.p&&x.c(t,m[0],m[1],r,m[2]));c++}},k[_[5]].d=function(t,e,n,r,i,o,s,u,l,f,d,p,h,m,g,b,w,k,$,E,O,N,C,M){if(s=1,f=1,(M=this).p=1,(o=t.getAttribute(_[1]))&&(o=o.trim(),t.removeAttribute(_[1]),o&&(M.H||(i=M.o(n.split("."),o,0,0,r))),n+=n?"."+o:o,e[o]={},e=e[o],s=0),r)v(t,e),M.p=y(t,e);else{if((o=t.getAttribute(_[4]))&&s&&(o=o.trim())){for(M.H=1,f=0,M.q++,M.w[M.q]=[],M.s[M.q]=[],n&&(M.w[M.q]=n.split(".")),m=function t(e,n,r,i,a,o,s,u,l,f,c,d){for(s=(o=e.childNodes).length,l=0,d=i.n,a&&(u=e.getAttribute(_[4]))&&(u=u.trim())&&(i.n++,r[u]={$_N:i.n,$_P:-1},c=r[u],n.push([u,c,e]),r=r[u],d=0);l<s;)1==o[l].nodeType&&(f=1,(u=o[l].getAttribute(_[4]))&&(u=u.trim())&&(i.n++,r[u]={$_N:i.n,$_P:d},c=r[u],n.push([u,c,o[l]]),t(o[l],n,c,i),f=0),f&&t(o[l],n,r,i)),l++}(t,p=[],d={},h={n:-1},1),u=p.length,l=0,C=M.w[M.q];l<u;){for(h={},O=[],N=[],$=l,E=0,g=p[l][1],b=p[l][0],k=p[l][2],w=g.$_N,0==l&&(g.e=k.parentNode,g.e.removeChild(k)),$++;$<u;)p[$][1].$_P==w&&(p[$][1].d=E,E++,N.push($)),$++;for($=E;$--;)(m=p[N[$]][2].parentNode).removeChild(p[N[$]][2]),O.push(m);for(d=c(k),M.I=d[1],v(k,h,M.I),M.p=y(k,h,M.I),M.p&&M.c(k,h,""),E&&(g.c=[]);E--;)g.c.push(a(O[E],M.I));g.b=d[0],g.a=h,C.push(b),l++}M.E[M.q]={},h=null,O=null,N=null,M.u[M.q]=p,p=null,M.H=0}M.H?(v(t,e,M.I),M.p=y(t,e,M.I)):(v(t,e),M.p=y(t,e))}return M.H?x(t,e,M.I,r,i,M.z,M.y,M.x):x(t,e,0,r,i,M.z,M.y,M.x),(o=t.getAttribute(_[0]))&&f&&!M.H&&(o=o.trim(),t.removeAttribute(_[0]),o&&(M.z[o]=t)),[e,n,i]},k[_[5]].e=function(t,e,n,r,i,a,u,f,c,p,h,m,g,v,y,b,_,x,w,k,$,E,O,N,C,M,S){if(n=function(t,e,n,r,i,a,s,u,l){for(r=e.length,u=[];r--;){for(n=e[r].length,i=0,a=0;i<n&&t[i]==e[r][i];)a++,i++;u[r]=a}for(n=u.length,a=-1,i=0;n--;)u[n]&&u[n]>i&&(i=u[n],a=n);if(-1!=a){for(i=0,n=(e=o(t,u[a]-1)).length,u=[],s=-1;i<n&&(r=e[i]);)e[i+1]!=l&&u.push(e[i+1]),s++,i+=2;return-1!=s?{a:s,b:a,c:u}:void 0}}(t,(e=this).w)){for(r=e.r,i=e.x,a=0,c=(u=t.length)-1,1==u&&(f=r);a<u;)r[t[a]]?r=r[t[a]]:(r[t[a]]={},r=r[t[a]]),i=i[t[a]],a==u-2&&(f=r),a++;if(u=i.length,p=n.a,h=n.b,-1!=e.w[h].indexOf(t[t.length-1])){if(v=n.c,y=(g=e.u[h][p][1]).a,b=g.b,_=g.c,m=g.d,p)for(u=p;u--;)(n=e.s[h][u])&&(v[u]=n.indexOf(Number(v[u])));if(O="$_"+h+p+(n=e.u[h][p][0])+s(v,1),e.G&&e.G[n])for(w=e.G[n],k=[],N=t.join(".")+"."+(v.length?v.join(".")+".":""),a=0,u=i.length;a<u;){if(S=null,w(x={$_allow:1,$_data:i[a],$_forData:i,$_index:a,$_watcher:function(t){S=t},$_pos:v.concat(a),$_gIndex:h,$_gData:e.x,$_gWatcher:e.C,$_items:e.z},e.v),S)for(E in S)C=N+a+"."+E,M=S[E],(n={})[C]=M,e.C(n);x.$_allow&&k.push(a),a++}for(e.s[h][p]=k,e.E[h][O]||(e.E[h][O]={a:[],b:[],c:[],d:[]}),$=e.E[h][O].a,E=e.E[h][O].b,w=e.E[h][O].c,M=e.E[h][O].d,x=e.E[h][O].e,e.E[h][O].e=[],f[t[c]]={},r=f[t[c]],p?(a=v.length,N="$_"+h+(p-1)+e.u[h][p-1][0]+s(v,1,a-1),n=e.E[h][N].c[v[a-1]][m],e.E[h][N].e.push([O,m])):n=g.e,t=_?_.length:0,v=1,a=0,(u=k?k.length:i.length)>=(h=E.length)&&(a=h),h>=u&&(v=0,a=u,u=h);a<u;){if(v){if(c=d(b),E.push(c[0]),t){for(f=t,p=[];f--;)p.push(c[1][_[f]]);w.push(p)}x={},m=[],M.push(m),l(x,y,c[1],e.y,m,e.z,e.x),$.push(x),n.appendChild(c[0])}else $.pop(),M.pop(),n.removeChild(E.pop()),w.pop();a++}for(u=k?k.length:$.length;u--;){for(f=(h=M[u]).length;f--;)h[f].$_data=i[k?k[u]:u];r[k?k[u]:u]=$[u]}return k}}},k[_[5]].f=function(t,e,n,r,a,u,l,f,c){var d,p,h,m,g,v=i(t),y=e,b=0,_=-1,x=this;for(d in t)p=t[d],m=null,g=0,u&&d!=u[b]||(l&&(f=++_,c=u?u[b]:b),n&&(v=i(p)),(e=o(y,0)).push(d),h=s(e),4==v&&1==n&&(m=x.e(e),g=1),n?x.i(t,d,o(e,0),h,v,f,c):x.j(e,r,a),x.t[v]||x.f(p,e,n,r,a,m,g,f,c),b++);y=null,e=null},k[_[5]].g=function(t,e,n,r,a){for(n in t)r=t[n],a=i(r),e&&void 0!==e[n]?t[n]=e[n]:a<4?t[n]="":5===a?this.g(r):t[n]=[]},k[_[5]].h=function(t,e,n,r){for(e in t)n=t[e],(r=i(n))>3?5===r?this.h(n):t[e]=[]:t[e]="",delete t[e]},k[_[5]].i=function(t,e,n,r,a,s,u,l,f,c,d,p,h,m,g){l=t[e],c=a,h=(f=this).z,k.b&&f.F&&f.F[r]&&(p=f.F[r],h.$_value=g,h.$_destroy=0,p(g,l,h,f.v),h.$_value==g||(l=h.$_value),h.$_destroy&&(p=null)),(0,$.default)(t,e,{enumerable:1,configurable:1,set:function(t){f.F&&f.F[r]!==g&&(p=f.F[r]),l!==t&&(c=i(t),k.b&&p&&(h.$_value=g,h.$_destroy=0,p(l,t,h,f.v),h.$_value===g||(t=h.$_value),h.$_destroy&&(p=null)),5==a?(5!=c&&(t="updata"==t?k.e(l):{}),f.g(l,t),f.f(l,n,1)):4==a?(4!=c&&(t="updata"==t?k.e(l):[]),d=o(n,0),f.h(l),l=t,f.f(l,d,1,0,0,f.e(d),1)):f.t[c]&&(l=t,f.j(n,0,0,s,u)),h.$_caller&&(h.$_caller=0))},get:function(){return l}}),f.t[c]&&f.j(n,0,0,s,u),h.$_caller&&(h.$_caller=0)},k[_[5]].j=function(t,e,n,r,i,a){(a=this.k(t,e,n,r,i))&&this.l(a,t,n)},k[_[5]].k=function(t,e,n,r,i){if(t){for(var a,o=t.length,s=this,u=0,l=e||s.r;u<o;){if(!l||!t)return;l=l[t[u]],u==o-2&&(a=l),u++}return l&&(l.$_index||l.$_value)&&(a=l),a&&(s.J=r,s.K=i,a.$_index&&s.l(a.$_index,t,n),a.$_value&&s.l(a.$_value,t,n)),l}},k[_[5]].l=function(t,e,n){for(var r,i,a=t.length,o=this;a--;)(r=t[a]).$_d&&(r.$_d.textContent=o.n(e,r.$_a,r.$_b,n)),r.$_e&&o.m(r.$_e,e,r.$_f,n),r.$_h&&(r.$_h.innerHTML=o.o(e,e[e.length-1],n)),r.$_j&&(i=o.o(e,e[e.length-1],n,1),r.$_j.value=i[0],r.$_j.oninput=function(){i[1][i[2]]=this.value}),r.$_l&&(i=o.o(e,e[e.length-1],n,1),r.$_l.value=i[0],r.$_l.onchange=function(){i[1][i[2]]=this.value})},k[_[5]].m=function(t,e,n,r){var i,a,o,s,u,l=this.o(e,n[0],r),f=n[1],c=n.length,d=1;2==c&&(s=1,d=0,a=l),4==c&&(l&&(s=1),d=0,a=n[2],o=n[3]),6==c&&(f=n[2],d=0,0==(i=n[1])&&l==n[3]&&(s=1),1==i&&l>=n[3]&&(s=1),2==i&&l<=n[3]&&(s=1),3==i&&l>n[3]&&(s=1),4==i&&l<n[3]&&(s=1),a=n[4],o=n[5]),d||(f&&(f=f.toLowerCase()),"class"==f&&(u=" "),"style"==f&&(u=";"),c>2&&u?((l=t.getAttribute(f))&&(l=l.replace(u+o,"").replace(u+a,"").trim()),l=l?l+u+(s?a:o):u+(s?a:o),t.setAttribute(f,l)):t.setAttribute(f,s?a:o))},k[_[5]].n=function(t,e,n,r,i,a,u,l){for(i=e.length,l=o(n,0);i--;)a=n[e[i]],u=this.o(t,a,r),l[e[i]]=u;return s(l,1)},k[_[5]].o=function(t,e,n,r,i,a,o,s,u,l){if(u=this,a=t.length,s=0,n=o=n||u.x,i&&a++,"$_index"==e)return u.J;for(;s<a&&(o=s!=a-1?o[t[s]]:o[e])!=l;)s==a-2&&(n=o),s++;return"$_value"==e?n[u.K]:(o==l&&(o=""),r?[o,n,e]:o)},r=k,t.exports=r},function(t,e){t.exports=function(t){t.Plugins={module:[]},t.plugin=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);null==t.Plugins[e]&&(t.Plugins[e]=[]),t.Plugins[e].push(n)}}},function(t,e,n){t.exports=function(t){var e,r;try{r=n(64),e=n(130)}catch(t){}var i=t.render=function(n,r){if("[object Array]"==Object.prototype.toString.call(n)){for(var i=[],a=0;a<n.length;a++)i.push(t.render(n[a]));return i}var o=n.type,s={};for(var a in n.props)"children"!=a&&(s[a]=n.props[a]);var u=n.props.children;"[object Array]"!=Object.prototype.toString.call(u)&&(u=[u]);if(null!=(s=s||{}).attrs&&"[object Object]"==Object.prototype.toString.call(s.attrs))for(var a in s.attrs)s[a]=s.attrs[a];var l="div";if("string"==typeof o&&(l=o),{svg:!0,rect:!0,circle:!0,ellipse:!0,line:!0,polyline:!0,polygon:!0,path:!0,defs:!0,filter:!0,lineargradient:!0,stop:!0,g:!0}[l]||"fe"==l.substr(0,2))var f=document.createElementNS("http://www.w3.org/2000/svg",l);else f=document.createElement(l);for(var a in s)"function"==typeof s[a]||f.setAttribute(a,s[a]),f[a]=s[a];var c={},d=function e(n){if("string"==typeof n||"number"==typeof n||null==n){if(null==n&&(n=""),(n+="").length>0){var r=document.createTextNode(n);f.appendChild(r)}}else if("[object Object]"==Object.prototype.toString.call(n))if(n.$$typeof){var i=t.render(n,f);f.appendChild(i)}else for(var a in n){r=document.createTextNode("{{"+a+"}}");f.appendChild(r),c[a]=n[a]}else if("[object Array]"==Object.prototype.toString.call(n))for(var a in n)e(n[a])};for(a=0;a<u.length;a++){d(l=u[a])}if(f._vueData=c,"string"!=typeof o){var p=!1;if(o.prototype&&o.prototype.isReactComponent)try{var h=document.createElement("div");f=e.render(n,h),f=h.childNodes[0],p=!0}catch(t){}if(!p){var m=f;(f=o.option({prefabDom:f,prefabAttr:s}).new(s))._prefab=m,(h=document.createElement("div")).appendChild(f)}}return f};t.createElement=function(){return"self"==t.reactMode?t.createRectElement.apply(t,arguments):r.createElement.apply(r,arguments)},t.createElementMain=function(){if("self"==t.reactMode)return t.createRectElement.apply(t,arguments);var e=t.createElement.apply(t,arguments),n=i(e);return n.$v=e,n}}},,,,,,function(t,e,n){var r,i=n(6),a=(r=i)&&r.__esModule?r:{default:r};t.exports=function(t){var e=t.$r=function(n,r,i,u,l){var f=!1;null==i&&(f=!0),i=i||{},l=l||{};var c,d={dom:!1,attr:!1,childs:!1};r&&(u=u||r.parentNode),"function"==typeof n.name&&null==n.name.new&&(n=n.name(n.attrs,n)),r&&(null==r.$$dom||"object"==(void 0===n?"undefined":(0,a.default)(n))&&("function"!=typeof n.name&&(r.tagName||"").toLowerCase()!=n.name.toLowerCase()||"function"==typeof n.name&&r.module&&r.module.__func!=n.name)||"object"!=(void 0===n?"undefined":(0,a.default)(n))&&"#text"!=r.nodeName||"object"==(void 0===n?"undefined":(0,a.default)(n))&&"#text"==r.nodeName)&&(d.dom=!0,c=r,r=null);var p=!1;if(null==r&&(r="object"!=(void 0===n?"undefined":(0,a.default)(n))?document.createTextNode(n):"function"!=typeof n.name?s(n.name):n.name.new(n.attrs),p=!0,null==r.module?r.$$mainNode=i.mainNode||r:r.$$parentNode=i.mainNode||r,r.$$dom={name:n.name,attrs:n.attrs},r.$$$dom={attrs:{}},u)){if(c)try{u.insertBefore(r,c),u.removeChild(c),t.triggerDom("destory",null,c)}catch(t){u.appendChild(r)}else u.appendChild(r);r.module&&r.module.sendMessage("did-mount")}null==i.mainNode&&(i.mainNode=r,r.ids=r.ids||{});var h={value:!0,checked:!0},m=function(t){d.attr=!0,f||(r.$$dom.attrs[t]=n.attrs[t]),r.$$$dom.attrs[t]=n.attrs[t],"function"!=typeof n.attrs[t]&&"object"!=n.attrs[t]?r.setAttribute(t,n.attrs[t]):r[t]=n.attrs[t],h[t]&&(r[t]=n.attrs[t]),"dom-slot"==t&&(i.mainNode.slotDom=r,i.mainNode.module&&(i.mainNode.module.slotDom=r),r.$$stopRender=!0,r.$$slotDom=!0),"lid"==t&&(i.mainNode.ids[n.attrs[t]]=r),"stop-render"==t&&(r.$$stopRender=!0)};for(var g in h)n.attrs&&void 0!==n.attrs[g]&&"input"==n.name&&n.attrs[g]!=r[g]&&m(g);for(var g in n.attrs)(n.attrs[g]!=r.$$dom.attrs[g]||p)&&m(g);if("function"!=typeof n.name||f)for(var g in r.$$dom.attrs)(n.attrs[g]!=r.$$dom.attrs[g]||f&&n.attrs[g]!=r.$$$dom.attrs[g])&&m(g),null==n.attrs[g]&&r.removeAttribute(g);for(var g in r.$$dom.attrs)void 0!==n.attrs[g]||f||(d.attr=!0,delete r.$$dom.attrs[g]);for(var g in function(){if(n.childs&&1!=r.$$stopRender&&(!n.attrs||null==n.attrs["render-once"]||p)){var a=r;if(a!=i.mainNode&&(a=r.slotDom||r),null==a.module||a==i.mainNode){var o=[];if(a.childNodes)for(var s=0;s<a.childNodes.length;s++)1!=a.childNodes[s].$$noRender&&o.push(a.childNodes[s]);var u=function(t){for(var e=n.childs,r=n.attrs["sort-key"]||"key",i=[],a={},o={},s=[],u={},l=[],f=!1,c=0;c<t.length;c++){var d=t[c];1!=d.$$noRender&&(null!=d.$$dom&&null!=d.$$dom.attrs&&null!=d.$$dom.attrs[r]?(null!=a[d.$$dom.attrs[r]]&&(f=!0,console.warn("键["+d.$$dom.attrs[r]+"]出现重复，可能导致DOM丢失")),o[d.$$dom.attrs[r]]=c,a[d.$$dom.attrs[r]]=d):s.push(d))}var p=0;for(var c in e)null==e[c].attrs||null==e[c].attrs[r]||null==a[e[c].attrs[r]]?s[p]&&s[p].$$dom&&s[p].$$dom.name==e[c].name?(i.push([e[c],s[p]]),u[p]=!0,p++):(i.push([e[c]]),f=!0):(o[e[c].attrs[r]]!=c&&(f=!0),i.push([e[c],a[e[c].attrs[r]]]),delete a[e[c].attrs[r]]);for(var c in s)null==u[c]&&l.push(s[c]);for(var c in a)l.push(a[c]);return{mitList:i,needSort:f,removes:l}}(o),l=u.mitList,f={};if(u.needSort){for(var s in l)null==l[s][1]?e(l[s][0],null,i,a,f):(e(l[s][0],l[s][1],i,a,f),a.appendChild(l[s][1]));for(s=a.childNodes.length-l.length-1;s>=0;s--){var c=a.childNodes[s];1!=c.$$noRender&&(a.removeChild(c),c.querySelectorAll&&t.triggerDom("destory",null,c))}}else{for(var s in l)null!=l[s][1]?e(l[s][0],l[s][1],i,a,f):e(l[s][0],null,i,a,f);for(var s in u.removes)a.removeChild(u.removes[s]),u.removes[s].querySelectorAll&&t.triggerDom("destory",null,u.removes[s])}f.change&&(d.childs=!0,1==a.$$slotDom&&a.$$mainNode&&a.$$mainNode.module&&a.$$mainNode.module.sendMessage("render-change-slot"))}}}(),"object"!=(void 0===n?"undefined":(0,a.default)(n))&&n.toString()!=r.data&&(r.data=n.toString()),n.attrs&&n.attrs["lcg-uses"]&&o(r,n.attrs["lcg-uses"]),d){var v=!1;d[g]&&(v=!0,r.module&&!f&&r.module.sendMessage("render-change-"+g,n)),v&&(r.module&&!f&&(r.module.sendMessage("render-change",n),r.module.$r&&r.module.__auto_render&&r.module.$r()),l.change=!0)}return r.module&&(p&&r.module.sendMessage("first-render-end"),r.module.sendMessage("render-end"),f||r.module.sendMessage("update-render-end")),r};t.React={createElement:function(t,e){if(null==t)throw new Error("无法使用空的标签名!");for(var n={$$type:"element",name:t,attrs:e||{}},r=[],i=2;i<arguments.length;i++){var a=arguments[i];if(null==a&&(a=""),"[object Array]"==Object.prototype.toString.call(a))for(var o=0;o<a.length;o++)null==a[o]&&(a[o]=""),r.push(a[o]);else r.push(a)}return n.childs=r,n}}};var o=function(t,e){if("function"==typeof e)return e(t);for(var n in e)"function"==typeof e[n]&&e[n](t)},s=function(t,e){return e=e||document,{svg:!0,rect:!0,circle:!0,ellipse:!0,line:!0,polyline:!0,polygon:!0,path:!0,defs:!0,filter:!0,lineargradient:!0,stop:!0,text:!0,g:!0}[t]||"fe"==t.substr(0,2)?e.createElementNS("http://www.w3.org/2000/svg",t):e.createElement(t)}},function(t,e,n){var r,i=n(6),a=(r=i)&&r.__esModule?r:{default:r};t.exports=function(t){var e=t.createRectElement=function(t,e){var n="http://www.w3.org/2000/svg",r={svg:!0,rect:!0,circle:!0,ellipse:!0,line:!0,polyline:!0,polygon:!0,path:!0,defs:!0,filter:!0,lineargradient:!0,stop:!0,g:!0};if(null!=(e=e||{}).attrs&&"[object Object]"==Object.prototype.toString.call(e.attrs))for(var i in e.attrs)e[i]=e.attrs[i];var o="div";if("string"==typeof t&&(o=t),r[o]||"fe"==o.substr(0,2))var s=document.createElementNS(n,o);else s=document.createElement(o);for(var i in e)"function"==typeof e[i]||(null==e[i]||"function"!=typeof e[i]&&"object"!=(0,a.default)(e[i]))&&s.setAttribute(i,e[i]),s[i]=e[i];var u={},l=function t(e){if("string"==typeof e||"number"==typeof e||null==e){null==e&&(e="");var n=document.createTextNode(e);s.appendChild(n)}else if("[object Object]"==Object.prototype.toString.call(e))for(var r in e){n=document.createTextNode("{{"+r+"}}");s.appendChild(n),u[r]=e[r]}else if("[object Array]"==Object.prototype.toString.call(e))for(var r in e)t(e[r]);else for(var r in s.appendChild(e),e._vueData)u[r]=e._vueData[r]};for(i=2;i<arguments.length;i++){l(o=arguments[i])}if(s._vueData=u,"string"!=typeof t){var f=s;(s=t.option({prefabDom:s,prefabAttr:e}).new(e))._prefab=f}return s};t.react={createElement:e},t.setReactMode=function(e){t.reactMode=e,"self"==e&&(window.React=t.react)}}},function(t,e){t.exports=function(t){var e=t.modify={};e.Write=function(t){return"function"==typeof t?t:function(e){for(var n in t)e[n]=t[n];return e}},e.Proto=function(t){return"function"==typeof t?t:function(e){for(var n in t)e.prototype[n]=t[n];return e}}}},function(t,e,n){var r,i=n(6),a=(r=i)&&r.__esModule?r:{default:r};var o=n(66).lcg;o.$react={createElement:function(t,e){for(var n={type:t,attrs:e=e||{},__ele:!0},r=[],i=2;i<arguments.length;i++)r.push(arguments[i]);return e._childs=r,n}},o.$render=function(t,e,n){var r=!1;null==n&&(r=!0,n={main:t},t.ids=t.ids||{});var i,s=t.attrs;if("string"==typeof t.type)i=document.createElement(t.type);else{for(var u in s._childs)s._childs[u]._info=n;i=t.type.option({childDom:s._childs}).new(s)}s.lid&&((t._info?t._info.main:n.main).ids[s.lid]=i);var l=function t(e){if("object"!=(void 0===(e=e||"")?"undefined":(0,a.default)(e))){var r=document.createTextNode(e);i.appendChild(r)}else if(e.__ele)i.appendChild(o.$render(e,null,n));else if("[object Array]"==Object.prototype.toString.call(e))for(var s in e)t(e[s]);else i.appendChild(e)};if(s._childs){var f=s._childs;if(delete s._childs,"string"==typeof t.type)for(var u in f)l(f[u])}if(s["dom-slot"]&&n.main._option){delete s["dom-slot"];f=n.main._option.childDom;for(var u in f)l(f[u])}for(var u in s)"function"==typeof s[u]||"object"==(0,a.default)(s[u])?i[u]=s[u]:i.setAttribute(u,s[u]);return r&&(i.ids=n.main.ids),i}},,,,,,,function(t,e,n){var r=n(13);r.Listen=function(t,e,n){"function"==typeof e&&(n=e,e=null),t.$listen(e,n),this.message("destory",(function(e){t.$unlisten(n)}))},r.DelayListen=function(t,e,n){var r;"function"==typeof e&&(n=e,e=null),t.$listen(e,(function(t){r=t})),this.message("dt",(function(){r&&(n(r),r=null)}))},r.ListenMgr=function(){var t=[];this.listen=function(e,n,r){"function"==typeof n&&(r=n,n=null),e.$listen(n,r),t.push({cam:e,func:r,key:n})},this.clear=function(){for(var e=t.length-1;e>=0;e--)t[e].cam.$unlisten(t[e].func),t.splice(e,1)},this.listenOne=function(){this.clear(),this.listen.apply(this,arguments)}},r.Text=function(t,e){var n={target:this,tree:!1,clos:null,action:function(t,e,n,r){r.target.ids[t]&&(r.target.ids[t].innerText=e)}};for(var i in e)n[i]=e[i];var a=new r(t,n.tree);for(var i in a.$listen((function(t){n.action(t.key,t.value,t,n)})),t)n.action(i,a[i],null,n);return a},r.List=function(t,e){var n=this,i={target:n._proxy,tree:!0,module:"div",strKey:null,action:function(t,e,n,r){"create"==t?r.actionCreate(e,n.index,n,r):"delete"==t?r.actionDelete(e,n.deletes,n,r):"sort"==t&&r.actionSort(n,r)},actionCreate:function(t,e,n,r){for(var i=o(),a=0;a<t.length;a++){var s=e+a,u=r.createItem(t[a],s,a,r.module,r);u.$__ListValue=t[a],s>=i.length?r.target.appendChild(u):r.target.insertBefore(u,i[s])}},actionDelete:function(t,e,n,r){for(var i=o(),a=[],s=[],u=0;u<t.length;u++)i[t[u]]&&(a.push(i[t[u]]),s.push(u));for(var u in a)r.deleteItem(a[u],s[u],u,r)},actionSort:function(t,e){for(var n=o(),r=0;r<s.length;r++)for(var i=0;i<n.length;i++){var a=n[i];if(a.$__ListValue==s[r]){e.target.appendChild(a);break}}},createItem:function(t,e,r,i,a){var o;return"function"!=typeof i?(o=document.createElement(i),null==a.strKey?o.innerText=t:o.innerText=t[a.strKey]):o=i.new(t,{index:e,sub_index:r,cfg:a,instance:n,parentNode:a.target,args:a.args,list:s}),o},deleteItem:function(t,e,n,r){t.module&&t.module.remove?t.module.remove():r.target.removeChild(t)}};for(var a in e)i[a]=e[a];var o=function(){for(var t=[],e=i.target.childNodes,n=0;n<e.length;n++)"STYLE"!=e[n].nodeName&&t.push(e[n]);return t},s=new r(t,i.tree),u=function(t){t.target==s&&i.action(t.action,t.value,t,i)};return s.$listen(u),this.message("destory",(function(){s.$unlisten(u)})),i.action("create",s,{index:0},i),s}},function(t,e,n){t.exports=n(146)},function(t,e,n){var r,i=u(n(4)),a=u(n(5)),o=u(n(11)),s=u(n(12));function u(t){return t&&t.__esModule?t:{default:t}}var l=n(147),f=n(3),c=n(13);t.exports=f(r=function(){function t(){(0,o.default)(this,t)}return(0,s.default)(t,[{key:"init",value:function(){var t=this,e=this.nodes=new c([]),n=this.types={},r=this.modules={},o=(this.outputs=[{key:"image",type:"image",name:"屏幕"}],this.attrs={x:0,y:0,outputs:{}});this.addType=function(e){return null==e?console.warn("无法添加null作为数据类型"):null==e.key?console.warn("添加数据类型必须有key值"):n[e.key]?console.warn("添加数据类型失败，数据类型的key ["+e.key+"] 已存在"):(n[e.key]=e,void(e.selector&&t.addModule(p(e))))},this.addModule=function(t){return null==t?console.warn("无法添加null作为组件"):null==t.key?console.warn("添加组件必须有key值"):r[t.key]?console.warn("添加组件失败，组件的key ["+t.key+"] 已存在"):void(r[t.key]=t)},this.usePlugin=function(t){if(null!=t){for(var e in t.types)this.addType(t.types[e]);for(var e in t.modules)this.addModule(t.modules[e])}},this.addNode=function(n,i){if(null==r[n])return console.warn("没有找到["+n+"]组件");e.push(l.new(r[n],i,t))},this.removeNode=function(t){var n=t.attrs.uid;for(var r in e)e[r]!=t&&e[r].removeUidLink(n);for(var r in o.outputs)o.outputs[r].uid==n&&(o.outputs[r]=null);e.remove(t)},this.save=function(){var t={attrs:o},n=t.nodes=[];for(var r in e)n.push(e[r].attrs);return t},this.load=function(e){for(var n in f.copyJSON(e.attrs,o,!0),e.nodes)t.addNode(e.nodes[n].key,e.nodes[n])},this.run=(0,a.default)(i.default.mark((function t(){var n,r,a,s;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r in n={},e)e[r].attrs.level=-1,n[e[r].attrs.uid]=e[r],e[r].error=null;a=d(e,o.outputs,n),t.t0=i.default.keys(a);case 4:if((t.t1=t.t0()).done){t.next=10;break}return r=t.t1.value,t.next=8,a[r].run(n);case 8:t.next=4;break;case 10:s={},t.t2=i.default.keys(o.outputs);case 12:if((t.t3=t.t2()).done){t.next=19;break}if(r=t.t3.value,null!=o.outputs[r]){t.next=16;break}return t.abrupt("continue",12);case 16:n[o.outputs[r].uid]&&(s[r]=n[o.outputs[r].uid].attrs.outputs[o.outputs[r].key]),t.next=12;break;case 19:return t.abrupt("return",s);case 20:case"end":return t.stop()}}),t,this)})))}}]),t}())||r;var d=function(t,e,n){var r=function t(e,r){for(var i in r>e.attrs.level&&(e.attrs.level=r),e.attrs.inputs){var a=e.attrs.inputs[i];if(null!=a)if(f.isArray(a))for(var o in a)a[o].uid&&n[a[o].uid]&&t(n[a[o].uid],r+1);else a.uid&&n[a.uid]&&t(n[a.uid],r+1)}};for(var i in e)null!=e[i]&&null!=n[e[i].uid]&&r(n[e[i].uid],0);var a=[];for(var i in t)t[i].attrs.level>-1&&a.push(t[i]);return a.sort((function(t,e){return e.attrs.level-t.attrs.level})),a},p=function(t){return{name:"变量-"+t.name,menu:["变量",t.name],key:"$$type-vars-"+t.key,inputs:[{type:t.key,name:"值",key:"value",use_link:!1}],outputs:[{type:t.key,name:"输出",key:"value"}],run:(e=(0,a.default)(i.default.mark((function t(e){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{value:e.value});case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})};var e}},function(t,e,n){var r,i=l(n(4)),a=l(n(21)),o=l(n(5)),s=l(n(11)),u=l(n(12));function l(t){return t&&t.__esModule?t:{default:t}}var f=n(3);t.exports=f(r=function(){function t(){(0,s.default)(this,t)}return(0,u.default)(t,[{key:"init",value:function(t,e,n){var r=this;this.info=t,this.error=null;var s,u=this.attrs={key:t.key,x:0,y:0,uid:f.UUID(),inputs:{},forms:{},level:0,outputs:{},cache:{}};for(var l in f.copyJSON(e,u,!0),t.inputs){var c=t.inputs[l];u.inputs[c.key]||(1==c.array?u.inputs[c.key]=[]:null!=c.default&&null==u.forms[c.key]&&(u.forms[c.key]=c.default))}t.init&&t.init.call(this),this.run=(s=(0,o.default)(i.default.mark((function e(n){var o,s,l,c,d;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in o={},u.forms)o[s]=u.forms[s];e.t0=i.default.keys(u.inputs);case 3:if((e.t1=e.t0()).done){e.next=11;break}if(s=e.t1.value,null!=(l=u.inputs[s])){e.next=8;break}return e.abrupt("continue",3);case 8:if(f.isArray(l))for(c in o[s]=[],l)o[s].push(n[l[c].uid].attrs.outputs[l[c].key]);else o[s]=n[l.uid].attrs.outputs[l.key];e.next=3;break;case 11:if(d={},e.prev=12,t.run&&(d=t.run.call(r,o)),!(d instanceof a.default)){e.next=18;break}return e.next=17,d;case 17:d=e.sent;case 18:d=d||{},e.next=25;break;case 21:throw e.prev=21,e.t2=e.catch(12),r.error=e.t2,e.t2;case 25:for(s in t.outputs)u.outputs[t.outputs[s].key]=d[t.outputs[s].key];return r.sendMessage("run-end",{outputs:u.outputs}),e.abrupt("return",d);case 28:case"end":return e.stop()}}),e,this,[[12,21]])}))),function(t){return s.apply(this,arguments)})}},{key:"addLink",value:function(t,e,n){var r=this.attrs.inputs;if(f.isArray(r[t])){for(var i in r[t])if(r[t][i].uid==e.attrs.uid&&r[t][i].key==n)return;r[t].push({uid:e.attrs.uid,key:n})}else r[t]={uid:e.attrs.uid,key:n}}},{key:"removeLink",value:function(t,e,n){var r=this.attrs.inputs;if(f.isArray(r[t]))for(var i in r[t])r[t][i].uid==e&&r[t][i].key==n&&r[t].splice(i,1);else r[t]=null}},{key:"removeUidLink",value:function(t){var e=this.attrs.inputs;for(var n in e)if(null!=e[n])if(f.isArray(e[n]))for(var r=e[n].length-1;r>=0;r--)e[n][r].uid==t&&e[n].splice(r,1);else e[n].uid==t&&(e[n]=null)}}]),t}())||r},function(t,e,n){(t.exports={}).map=n(149)},function(t,e,n){var r,i,a,o,s=l(n(11)),u=l(n(12));function l(t){return t&&t.__esModule?t:{default:t}}var f=n(3),c=n(13),d=f.React,p=n(150),h=n(155),m=n(156),g=n(157),v=n(69);t.exports=f(r=function(){function t(){(0,s.default)(this,t)}return(0,u.default)(t,[{key:"init",value:function(t){var e=this,n=this.store=new c(h(),!0);this.map=t,this.outputModules={};var r=this.modules={};this.$dom((function(){return d.createElement("div",null,d.createElement(g,{main:e}),d.createElement("div",{class:"bottom",lid:"bottom"},d.createElement("div",{class:"view",lid:"view"},d.createElement("svg",{lid:"svg"}),d.createElement("div",{lid:"modules"})),d.createElement("div",{class:"out"},d.createElement(b,{main:e}))))})),this.attrsDom=this._proxy.attrsDom=m.new(this),this.css({width:"100%",height:"100%","user-select":"none",">.bottom":{height:"calc(100% - 35px)",overflow:"hidden",position:"relative","font-size":"10px","background-color":"#222","background-image":"linear-gradient(#444 0%,#444 5%,rgba(0,0,0,0) 6%),linear-gradient(90deg,#444 0%,#444 5%,rgba(0,0,0,0) 6%)","background-size":"20px 20px",">.view":{position:"absolute",left:"50%",top:"50%",">svg":{width:"8000px",height:"8000px",position:"absolute",left:"-4000px",top:"-4000px",">g":{transform:"translate(4000px,4000px)"," path":{stroke:"#fff",fill:"transparent",cursor:"pointer"}}},">div":{position:"absolute",left:"0px",top:"0px"}},">.out":{position:"absolute",height:"100%",width:"100px",right:"0px",top:"0px","background-color":"#333","border-left":"1px solid #555"}}}),this.message("module-ready",(function(){e.ids.svg.appendChild(y.new({main:e}))})),w(this._proxy);var i=function(t){var n=p.new({node:t,main:e});r[t.attrs.uid]=n.module,e.ids.modules.appendChild(n)};for(var a in t.nodes)i(t.nodes[a]);t.nodes.$listen((function(t){if("create"==t.action)for(var n in t.value)i(t.value[n]);if("delete"==t.action)for(var n in t.deletes)a=t.deletes[n],r[a.attrs.uid].remove(),delete r[a.attrs.uid];var a;e.trigger("line-draw")})),this.on("contextmenu",(function(t){t.preventDefault()})),f.domEvent(e.ids.view,"mousewheel",(function(t){var r=n.states.scale;t.deltaY<0&&(r+=1),t.deltaY>0&&(r-=1),r<6&&(r=6),r>20&&(r=20),e.ids.bottom.style["font-size"]=r+"px",n.states.scale=r}));var o,s=function(){e.ids.view.style["margin-left"]=t.attrs.x+"px",e.ids.view.style["margin-top"]=t.attrs.y+"px"};s();var u,l,_,x,k,$,E={x:0,y:0};!function(){var e=t.modules,n={},r=function(e){for(var r=n,i=0;i<e.menu.length-1;i++)r[e.menu[i]]=r[e.menu[i]]||{},r=r[e.menu[i]];r[e.menu[i]]=function(){t.addNode(e.key,{x:E.x,y:E.y})}};for(var i in e)e[i].menu&&r(e[i]);o=n}(),k=!1,$=!1,e.on("mousedown",(function(n){2==n.button&&(n.target!=e.ids.bottom&&n.target!=e.ids.svg||($=!1,k=!0,u=t.attrs.x,l=t.attrs.y,_=n.x,x=n.y))})),e.message("mousemove",(function(n){k&&($=!0,t.attrs.x=u+n.x-_,t.attrs.y=l+n.y-x,s(),e.trigger("line-draw"))})),e.message("mouseup",(function(t){k&&(k=!1,$||(E=e.mouse2view(t),v.new(t,{"创建节点":o})))})),this.dom2view=function(t,n){return(n=n||{x:0,y:0}).x+=t.offsetLeft,n.y+=t.offsetTop,t.parentNode==e.ids.bottom||null==t.parentNode?(n.x-=e.ids.view.offsetLeft,n.y-=e.ids.view.offsetTop,n):e.dom2view(t.parentNode,n)},this.mouse2view=function(t){var n=e.ids.view.getBoundingClientRect();return{x:t.x-n.x,y:t.y-n.y}},this.trigger=function(t,n){f.triggerDom(t,n,e._proxy)}}}]),t}())||r;var y=f(i=function(){function t(){(0,s.default)(this,t)}return(0,u.default)(t,[{key:"init",value:function(t){var e=this;this.main=t.main;var n=[],r=t.main.map.nodes;this.$dom((function(){var i;if(null!=t.main.store.states.activeLine){var a=t.main.store.states.activeLine;i=e.getLine({x:a.x1,y:a.y1},{x:a.x2,y:a.y2})}for(var o in n=[],r)for(var s in r[o].attrs.inputs)if(f.isArray(r[o].attrs.inputs[s]))for(var u in r[o].attrs.inputs[s])n.push(e.getLineOfLink(r[o],r[o].attrs.inputs[s][u],s));else null!=r[o].attrs.inputs[s]&&n.push(e.getLineOfLink(r[o],r[o].attrs.inputs[s],s));for(var o in g_lines=[],t.main.map.attrs.outputs)null!=t.main.map.attrs.outputs[o]&&g_lines.push(e.getLineOfLinkGlobal(t.main.map.attrs.outputs[o],o));return d.createElement("g",null,d.createElement("g",null,i),d.createElement("g",null,n),d.createElement("g",null,g_lines))})),this.extend(c.Listen,t.main.store.states,(function(){e.$r()})),this.message("line-draw",(function(){e.$r()})),this.message("resize",(function(){e.$r()})),setTimeout((function(){e.$r()}))}},{key:"getLine",value:function(t,e,n){var r=(e.x+t.x)/2,i=(e.y+t.y)/2;return d.createElement("path",{data:n,oncontextmenu:this.delLink,d:"M"+t.x+","+t.y+" Q"+(t.x+40)+","+t.y+","+r+","+i+" T"+e.x+","+e.y})}},{key:"getLineOfLink",value:function(t,e,n){var r=this.main.modules[t.attrs.uid],i=this.main.modules[e.uid],a=this.main;return this.getLine(i.outputModules[e.key].getPluginPos(),r.inputModules[n].getPluginPos(),{node:t,link:e,inputkey:n,main:a})}},{key:"getLineOfLinkGlobal",value:function(t,e){var n=this.main.modules[t.uid].outputModules[t.key].getPluginPos(),r=this.main.outputModules[e].getPluginPos();return this.getLine(n,r,{node:this.main,main:this.main,inputkey:e,link:t})}},{key:"delLink",value:function(){var t=this.$$dom.attrs.data;null!=t&&(t.node==t.main?t.main.map.attrs.outputs[t.inputkey]=null:t.node.removeLink(t.inputkey,t.link.uid,t.link.key),t.main.trigger("line-draw"),t.main.trigger("struct-change"))}}]),t}())||i,b=f(a=function(){function t(){(0,s.default)(this,t)}return(0,u.default)(t,[{key:"init",value:function(t){for(var e in this.$dom((function(){return d.createElement("div",null)})),t.main.map.outputs){var n=t.main.map.outputs[e],r=_.new({data:n,main:t.main});this._proxy.appendChild(r),t.main.outputModules[n.key]=r.module}this.css({height:"100%",width:"100%"})}}]),t}())||a,_=f(o=function(){function t(){(0,s.default)(this,t)}return(0,u.default)(t,[{key:"init",value:function(t){var e=this;this.data=t.data,this.node=t.node,this.$dom((function(){return d.createElement("div",null,d.createElement("i",{lid:"plugin"}),d.createElement("z",null,t.data.name))})),this.extend(p.ItemStyle,t);this.extend(c.Listen,t.main.store.states,(function(){!t.main.store.states.activeOutputNode||t.main.store.states.activeOutputNode.data.type!=t.data.type&&"*"!=t.data.type?e.ids.plugin.classList.remove("active"):e.ids.plugin.classList.add("active")})),f.domEvent(e.ids.plugin,"mouseup",(function(e){var n=t.main.store.states.activeOutputNode;null==n||n.data.type!=t.data.type&&"*"!=t.data.type||(t.main.map.attrs.outputs[t.data.key]={uid:n.node.attrs.uid,key:n.data.key},t.main.trigger("struct-change"))}))}}]),t}())||o,x=!1,w=function(t){x||(x=!0,f.domEvent(document,"click",(function(t){f.triggerDom("click",t)})),f.domEvent(document,"mousedown",(function(t){f.triggerDom("mousedown",t)})),f.domEvent(document,"mousemove",(function(t){f.triggerDom("mousemove",t)})),f.domEvent(document,"mouseup",(function(t){f.triggerDom("mouseup",t)})),f.domEvent(window,"resize",(function(t){f.triggerDom("resize",t)})))}},function(t,e,n){var r,i,a,o=l(n(68)),s=l(n(11)),u=l(n(12));function l(t){return t&&t.__esModule?t:{default:t}}var f=n(3),c=f.React,d=n(13),p=n(69);t.exports=f(r=function(){function t(){(0,s.default)(this,t)}return(0,u.default)(t,[{key:"init",value:function(t){var e=this.node=t.node,n=e.info,r=this;for(var i in this.$dom((function(){return c.createElement("div",null,c.createElement("div",{lid:"title",class:"title"},n.name),c.createElement("div",{class:"group"},c.createElement("div",{lid:"left",class:"left"}),c.createElement("div",{lid:"right",class:"right"})))})),this.css({width:"20em",color:"#eee","border-radius":"4px","user-select":"none",border:"1px solid #666",position:"absolute",":hover":{"box-shadow":"0px 0px 3px rgba(255,255,255,0.5)"},".active":{"box-shadow":"0px 0px 3px 1px #ffb700"},".error":{"box-shadow":"0px 0px 3px 1px #f00"},">.title":{"background-color":"#444","border-radius":"4px 4px 0px 0px","text-align":"center",height:"1.4em","line-height":"1.4em",overflow:"hidden","border-bottom":"1px solid #555","font-size":"1.6em",cursor:"pointer"},">.group":{"background-color":"#333","border-radius":"0px 0px 4px 4px",position:"relative",">div":{display:"inline-block",width:"50%","text-align":"left","vertical-align":"top",position:"relative",".right":{"text-align":"right"}}}}),this.inputModules={},this.outputModules={},this.inputForms={},n.inputs)if(0!=n.inputs[i].use_link){var a=m.new((0,o.default)({data:n.inputs[i],key:i},t));this.inputModules[n.inputs[i].key]=a.module,r.ids.left.appendChild(a)}for(var i in n.outputs){a=g.new((0,o.default)({data:n.outputs[i],key:i},t));this.outputModules[n.outputs[i].key]=a.module,r.ids.right.appendChild(a)}var s,u,l,h,v,y,b=function(){r._proxy.style.left=e.attrs.x/10+"em",r._proxy.style.top=e.attrs.y/10+"em",t.main.store.states.activeNode==r?r._proxy.classList.add("active"):r._proxy.classList.remove("active")};b(),this.extend(d.Listen,t.main.store.states,(function(){b()})),this.on("click",(function(){t.main.store.states.activeNode=r})),r.message("dt",(function(){e.error!=s&&(s=e.error,null==e.error?(r._proxy.classList.remove("error"),r._proxy.removeAttribute("title")):(r._proxy.classList.add("error"),r._proxy.setAttribute("title",e.error.stack)))})),y=!1,f.domEvent(r.ids.title,"mousedown",(function(t){y=!0,h=t.x,v=t.y,u=e.attrs.x,l=e.attrs.y})),r.message("mousemove",(function(n){y&&(e.attrs.x=u+10*(n.x-h)/t.main.store.states.scale,e.attrs.y=l+10*(n.y-v)/t.main.store.states.scale,b(),t.main.trigger("line-draw"))})),r.message("mouseup",(function(t){y&&(y=!1)})),this.on("contextmenu",(function(n){p.new(n,{"删除节点":function(){t.main.map.removeNode(e)}})}))}}]),t}())||r;var h=t.exports.ItemStyle=function(t){var e=this;this.css({overflow:"hidden",height:"1.8em","line-height":"1.8em",position:"relative",">z":{"font-size":"1.4em",display:"inline-block","vertical-align":"middle",color:"#eee"},">i":{display:"inline-block",width:"0.8em",height:"0.8em",border:"1px solid #fff","vertical-align":"middle","border-radius":"100%",margin:"0px 3px",cursor:"pointer",opacity:.3,position:"relative",":before":{content:"''",display:"inline-block",width:"60%",height:"60%","background-color":"#ffb700",top:"20%",left:"20%","border-radius":"100%",position:"absolute",opacity:0},":hover":{"box-shadow":"0px 0px 3px #fff",opacity:1},".active":{"box-shadow":"0px 0px 3px 1px #ffff00",opacity:1,":before":{opacity:1}}}}),this.getPluginPos=function(){var n=t.main.dom2view(e.ids.plugin);return n.x+=5,n.y+=5,n}},m=f(i=function(){function t(){(0,s.default)(this,t)}return(0,u.default)(t,[{key:"init",value:function(t){var e=this;this.data=t.data,this.node=t.node,this.$dom((function(){return c.createElement("div",null,c.createElement("i",{lid:"plugin"}),c.createElement("z",null,c.createElement("t",{lid:"before"}),t.data.name,c.createElement("t",{lid:"after"})))})),this.extend(h,t),t.main.map.types[t.data.type].inputUIExpand&&t.main.map.types[t.data.type].inputUIExpand(e);this.extend(d.Listen,t.main.store.states,(function(){!t.main.store.states.activeOutputNode||t.main.store.states.activeOutputNode.data.type!=t.data.type&&"*"!=t.data.type?e.ids.plugin.classList.remove("active"):e.ids.plugin.classList.add("active")})),f.domEvent(e.ids.plugin,"mouseup",(function(e){var n=t.main.store.states.activeOutputNode;null==n||n.data.type!=t.data.type&&"*"!=t.data.type||n.node==t.node||(t.node.addLink(t.data.key,n.node,n.data.key),t.main.trigger("line-draw"),t.main.trigger("struct-change"))}))}}]),t}())||i,g=f(a=function(){function t(){(0,s.default)(this,t)}return(0,u.default)(t,[{key:"init",value:function(t){var e,n,r=this;this.data=t.data,this.node=t.node,this.$dom((function(){return c.createElement("div",null,c.createElement("z",null,c.createElement("t",{lid:"before"}),t.data.name,c.createElement("t",{lid:"after"})),c.createElement("i",{lid:"plugin"}))})),this.extend(h,t),t.main.map.types[t.data.type].outputUIExpand&&t.main.map.types[t.data.type].outputUIExpand(r),n=!1,f.domEvent(r.ids.plugin,"mousedown",(function(i){n=!0,t.main.store.states.activeOutputNode=r,e=r.getPluginPos(),t.main.store.states.activeLine={x1:e.x,y1:e.y,x2:e.x,y2:e.y}})),r.message("mousemove",(function(r){if(n){var i=t.main.mouse2view(r);t.main.store.states.activeLine={x1:e.x,y1:e.y,x2:i.x,y2:i.y}}})),r.message("mouseup",(function(){n&&(n=!1,t.main.store.states.activeLine=null,t.main.store.states.activeOutputNode=null)}))}}]),t}())||a},,,,,function(t,e){t.exports=function(){return{states:{activeLine:null,activeOutputNode:null,activeNode:null,scale:10}}}},function(t,e,n){var r,i,a=s(n(11)),o=s(n(12));function s(t){return t&&t.__esModule?t:{default:t}}var u=n(3),l=n(13),f=u.React;t.exports=u(r=function(){function t(){(0,a.default)(this,t)}return(0,o.default)(t,[{key:"init",value:function(t){var e=this;this.$dom((function(){return f.createElement("div",null,f.createElement("div",{lid:"panle"}))}));var n;t.map.types;this.css({width:"100%",height:"100%","background-color":"#333"}),this.extend(l.Listen,t.store.states,"activeNode",(function(){if(null!=(n=t.store.states.activeNode)){var r=n.node.info;for(var i in r.inputs)if(null==n.inputForms[r.inputs[i].key]&&1!=r.inputs[i].array){var a=t.map.types[r.inputs[i].type];null!=a?null!=a.selector&&(n.inputForms[r.inputs[i].key]=c.new({node:n,node_info:r,info:r.inputs[i],type_info:a,main:t})):console.warn("没有找到参数类型["+r.inputs[i].type+"]")}for(var i in e.ids.panle.innerText="",n.inputForms)e.ids.panle.appendChild(n.inputForms[i])}}))}}]),t}())||r;var c=u(i=function(){function t(){(0,a.default)(this,t)}return(0,o.default)(t,[{key:"init",value:function(t){this.$dom((function(){return f.createElement("div",null,f.createElement("div",{class:"title"},t.info.name),f.createElement("div",{class:"panle",lid:"panle"}))})),this.css({margin:"0px 5px",padding:"5px 0px",">.title":{color:"#fff"},">.panle":{padding:"2px 5px"}});var e=t.node.node.attrs.forms[t.info.key]||t.info.default,n=t.type_info.selector(e,(function(e){t.node.node.attrs.forms[t.info.key]=e,t.main.trigger("struct-change")}),t.info,this);this.ids.panle.appendChild(n)}}]),t}())||i},function(t,e,n){var r,i=o(n(11)),a=o(n(12));function o(t){return t&&t.__esModule?t:{default:t}}var s=n(3),u=(n(13),s.React);t.exports=s(r=function(){function t(){(0,i.default)(this,t)}return(0,a.default)(t,[{key:"init",value:function(){this.$dom((function(){return u.createElement("div",null)})),this.css({height:"35px","background-color":"#333","border-bottom":"1px solid #555"})}}]),t}())||r},function(t,e,n){var r=o(n(21)),i=o(n(4)),a=o(n(5));function o(t){return t&&t.__esModule?t:{default:t}}var s,u=n(14),l={};t.exports=(s=(0,a.default)(i.default.mark((function t(e,n,r){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=r||{},"canvas"!=n){t.next=5;break}return t.next=4,p(e,r.canvas);case 4:return t.abrupt("return",t.sent);case 5:if("img"!=n){t.next=9;break}return t.next=8,h(e,r.img);case 8:return t.abrupt("return",t.sent);case 9:if("texture"!=n){t.next=13;break}return t.next=12,m(e,r.texture,r.gl);case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return s.apply(this,arguments)});var f,c,d,p=(f=(0,a.default)(i.default.mark((function t(e,n){var r,a,o,s;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n||document.createElement("canvas"),a=r.getContext("2d"),o=function(t){return r.width=t.width,r.height=t.height,a.drawImage(t,0,0),{data:r,type:"canvas",width:t.width,height:t.height}},"canvas"!=e.type){t.next=9;break}if(null!=n){t.next=8;break}return t.abrupt("return",{data:e.data,type:"canvas",width:e.data.width,height:e.data.height});case 8:return t.abrupt("return",o(e.data));case 9:if("data-url"!=e.type&&"url"!=e.type){t.next=14;break}return t.next=12,h(e);case 12:return s=t.sent,t.abrupt("return",o(s));case 14:if("img"!=e.type){t.next=16;break}return t.abrupt("return",o(e.data));case 16:if("texture"!=e.type){t.next=24;break}return t.next=19,u.easyFilter(l,{image:e,close_frame:!0});case 19:return t.sent,r.width=e.width,r.height=e.height,a.drawImage(u.canvas,0,0),t.abrupt("return",{data:r,type:"canvas",width:e.width,height:e.height});case 24:case"end":return t.stop()}}),t,this)}))),function(t,e){return f.apply(this,arguments)}),h=(c=(0,a.default)(i.default.mark((function t(e,n){var a,o;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n||new Image,o=function(t){return new r.default((function(e){a.src=t,a.onload=function(){e({data:a,type:"img",width:a.width,height:a.height})}}))},"img"!=e.type){t.next=8;break}if(null!=n){t.next=7;break}return t.abrupt("return",{data:e.data,type:"img",width:e.data.width,height:e.data.height});case 7:return t.abrupt("return",o(e.data.src));case 8:if("data-url"!=e.type&&"url"!=e.type){t.next=12;break}return t.next=11,o(e.data);case 11:return t.abrupt("return",t.sent);case 12:if("canvas"!=e.type){t.next=16;break}return t.next=15,o(e.data.toDataURL());case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,this)}))),function(t,e){return c.apply(this,arguments)}),m=(d=(0,a.default)(i.default.mark((function t(e,n,r){var a,o,s;return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=r||u.gl,a=n||r.createTexture(),o=function(t){return twgl.setTextureFromElement(r,a,t),{data:a,type:"texture",gl:r,width:t.width,height:t.height}},"texture"!=e.type){t.next=6;break}if(null!=r&&r!=e.gl){t.next=6;break}return t.abrupt("return",{data:e.data,type:"texture",gl:r,width:e.width,height:e.height});case 6:if("img"!=e.type&&"canvas"!=e.type&&"video"!=e.type){t.next=8;break}return t.abrupt("return",o(e.data));case 8:if("data-url"!=e.type&&"url"!=e.type){t.next=13;break}return t.next=11,h(e);case 11:return s=t.sent,t.abrupt("return",o(s));case 13:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return d.apply(this,arguments)})},function(t,e,n){var r=o(n(4)),i=o(n(68)),a=o(n(5));function o(t){return t&&t.__esModule?t:{default:t}}var s,u=n(14),l=u.gl;t.exports=(s=(0,a.default)(r.default.mark((function t(e,n){var a,o,s,p,h,m,g,v;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(o in a={vs:c,fs:d,width:null,height:null,image:null,uniforms:{},buffers:{position:{data:[-1,-1,1,-1,-1,1,-1,1,1,-1,1,1],numComponents:2},uv:{data:[0,0,1,0,0,1,0,1,1,0,1,1],numComponents:2}},attachments:[{attach:0}],close_frame:!1},n)if("buffers"==o)for(s in n[o])a[o][s]=n[o][s];else a[o]=n[o];if("texture"==a.image.type&&a.image.gl==l){t.next=9;break}return e.filterTexture=e.filterTexture||l.createTexture(),t.next=6,u.getImage(a.image,"texture",{texture:e.filterTexture,gl:l});case 6:p=t.sent,t.next=10;break;case 9:p=(0,i.default)({},a.image);case 10:for(o in a.width=a.width||p.width,a.height=a.height||p.height,a.close_frame&&(a.buffers.uv={data:[0,1,1,1,0,0,0,0,1,1,1,0],numComponents:2}),null==e.filterInfo&&(e.filterInfo=f(a)),h=e.filterInfo,a.close_frame?twgl.bindFramebufferInfo(l,null):twgl.bindFramebufferInfo(l,h.fbi),twgl.setBuffersAndAttributes(l,h.pi,h.bi),a.buffers)twgl.setAttribInfoBufferFromArray(l,h.bi.attribs[o],a.buffers[o]);for(o in l.clearColor(0,0,0,0),l.clear(l.COLOR_BUFFER_BIT),u.canvas.width==a.width&&u.canvas.height==a.height||(u.canvas.width=a.width,u.canvas.height=a.height,l.viewport(0,0,a.width,a.height)),a.close_frame||h.fbi.width==a.width&&h.fbi.height==a.height||twgl.resizeFramebufferInfo(l,h.fbi,a.attachments,a.width,a.height),l.useProgram(h.pi.program),(m=(0,i.default)({},a.uniforms)).uSampler=p.data,m.uSize=[a.width,a.height],twgl.setUniforms(h.pi,m),twgl.drawBufferInfo(l,h.bi),g={outputs:[]},h.fbi.attachments)v={data:h.fbi.attachments[o],type:"texture",width:a.width,height:a.height,gl:l},g.outputs.push(v);return t.abrupt("return",g);case 31:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)});var f=function(t){var e={};if(e.pi=twgl.createProgramInfo(l,[t.vs,t.fs]),e.bi=twgl.createBufferInfoFromArrays(l,t.buffers),e.fbi=twgl.createFramebufferInfo(l,t.attachments,t.width,t.height),t.attachments.length>1){var n=0,r=[];for(var i in t.attachments)n++;for(i=0;i<n;i++)r.push(l.COLOR_ATTACHMENT0+i);n>1&&l.drawBuffers(r)}return l.bindTexture(l.TEXTURE_2D,null),e},c="\nattribute vec4 position;\nattribute vec2 uv;\n\nvarying vec2 vUV;\n\nvoid main() {\n\tvUV = uv;\n\tgl_Position = position;\n}",d="\nprecision mediump float;\nvarying vec2 vUV;\n\nuniform sampler2D uSampler;\nuniform vec2 uSize;\n\nvoid main(void){\n\tgl_FragColor = texture2D(uSampler, vUV);\n}\n"},function(t,e,n){(t.exports={}).base=n(161)},function(t,e,n){n(14);var r=n(162),i=n(163),a=n(164),o=n(165),s=n(166);t.exports=function(t){r(t),i(t),o(t),s(t),a(t)}},function(t,e,n){var r=a(n(4)),i=a(n(5));function a(t){return t&&t.__esModule?t:{default:t}}var o=n(3).react;t.exports=function(t){var e;t.addType({name:"图像",key:"image"}),t.addType({name:"文件",key:"file",selector:function(t,e){return o.createElement("input",{type:"file",onchange:function(t){null!=this.files[0]&&e(this.files[0])}})}}),t.addType({name:"浮点数",key:"float",selector:function(t,e,n,r){var i=o.createElement("input",{value:t,style:"width:100%;",type:n.input_type||"number",min:n.min,max:n.max,step:n.step}),a=function(t){var r=Number(this.value);"NaN"==r.toString()&&(r=0),null!=n.min&&r<n.min&&(r=n.min),null!=n.max&&r>n.max&&(r=n.max),this.value=r,e(Number(r))};if("range"==n.input_type){var s=!1;i.onmousedown=function(){s=!0},r.message("mousemove",(function(t){s&&a.call(i,t)})),r.message("mouseup",(function(t){s&&(s=!1)}))}else i.onchange=a;return i}}),t.addModule({name:"变量-浮点数(角度)",menu:["变量","浮点数(角度)"],key:"$$type-vars-float-angle",inputs:[{type:"float",name:"值",key:"value",use_link:!1,input_type:"range",min:0,max:360,step:.1}],outputs:[{type:"float",name:"输出",key:"value"}],run:(e=(0,i.default)(r.default.mark((function t(e){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{value:e.value});case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}),t.addType({name:"字符串",key:"string",selector:function(t,e,n){return o.createElement("input",{value:t||"",style:"width:100%;",type:"text",onchange:function(t){e(this.value)}})}}),t.addType({name:"颜色",key:"color",selector:function(t,e,n){return o.createElement("input",{value:t,type:"color",onchange:function(t){e(this.value)}})},outputUIExpand:function(t){var e=o.createElement("z",{style:"display:inline-block;vertical-align:inherit;width:0.8em;height:0.8em;border-radius:2px;background-color:#000;margin-left:4px;box-shadow:0px 0px 2px rgba(255,255,255,0.5);"});t.ids.after.appendChild(e),t.node.message("run-end",(function(n){var r=n.outputs[t.data.key];e.style["background-color"]=r}))}})}},function(t,e,n){var r=o(n(4)),i=o(n(5)),a=o(n(21));function o(t){return t&&t.__esModule?t:{default:t}}var s=n(14),u=n(3);t.exports=function(t){var e,n;t.addModule({name:"选择本地图片",menu:["图像","选择本地图片"],key:"image-file-select",inputs:[{name:"图片文件",type:"file",key:"file",use_link:!1}],outputs:[{type:"image",name:"图像",key:"image"}],init:function(){this.attrs.cache["save-url"]&&(this.urlCache=this.attrs.cache["save-url"],this.attrs.forms.file=null)},run:function(t){var e=this,n=function(t,n){e.img=e.img||new Image,e.img.src=t,e.attrs.cache["save-url"]=t,e.img.onload=function(){e.imgInfo={image:{data:e.img,type:"img"}},n(e.imgInfo)}};if(e.file!=t.file&&(e.urlCache=null),e.urlCache)return new a.default((function(t){n(e.urlCache,t)}));if(e.file&&t.file==e.file&&null!=e.imgInfo)return e.imgInfo;if(null==t.file)throw new Error("没有选择文件");if("image"!=t.file.type.substr(0,5))throw new Error("载入的不是图片文件");if(t.file.size>41943040)throw new Error("载入的文件大于40M载入上限");return e.file=t.file,new a.default((function(e,r){var i=new FileReader;i.onload=function(){n(this.result,e)},i.readAsDataURL(t.file)}))}}),t.addModule({name:"文字",menu:["图像","文字"],key:"image-text",inputs:[{name:"文本",type:"string",key:"text",default:"Hello!"},{name:"字体大小",type:"float",key:"font_size",default:30,step:1,min:1,max:300},{name:"文字颜色",type:"color",key:"font_color",default:"#ffffff"}],outputs:[{type:"image",name:"图像",key:"image"}],init:function(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")},run:(e=(0,i.default)(r.default.mark((function t(e){var n,i,a,o;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.ctx,i=e.text,a="bold "+e.font_size+"px 微软雅黑",n.font=a,o=n.measureText(i),this.canvas.width=Math.floor(o.actualBoundingBoxRight+o.actualBoundingBoxLeft),this.canvas.height=e.font_size+o.actualBoundingBoxDescent,n.font=a,n.fillStyle=e.font_color,n.fillText(i,o.actualBoundingBoxLeft,e.font_size),t.abrupt("return",{image:{data:this.canvas,type:"canvas",width:this.canvas.width,height:this.canvas.height}});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}),t.addModule({name:"矩形",menu:["图像","矩形"],key:"image-shape-rect",inputs:[{name:"颜色",type:"color",key:"color"},{name:"宽度",type:"float",key:"width",default:720,min:1,max:8192,step:1},{name:"高度",type:"float",key:"height",default:480,min:1,max:8192,step:1}],outputs:[{type:"image",name:"图像",key:"image"}],run:(n=(0,i.default)(r.default.mark((function t(e){var n,i,a;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.texture||s.gl.createTexture(),i=new u.easycolor(e.color),t.next=4,s.easyFilter(this,{image:{data:n,type:"texture",gl:s.gl,width:1,height:1},width:e.width,height:e.height,uniforms:{color:[i.r/256,i.g/256,i.b/256,i.a]},fs:"precision mediump float;\n\t\t\t\tuniform vec4 color;\n\n\t\t\t\tvoid main(void)\n\t\t\t\t{\n\t\t\t\t\tgl_FragColor = color;\n\t\t\t\t}"});case 4:return a=t.sent,t.abrupt("return",{image:a.outputs[0]});case 6:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})})}},function(t,e,n){var r=a(n(4)),i=a(n(5));function a(t){return t&&t.__esModule?t:{default:t}}var o=n(14);t.exports=function(t){var e,n,a;t.addModule({name:"图像对比",menu:["其他","图像对比"],key:"image-comparison",inputs:[{name:"图像1",type:"image",key:"image1"},{name:"图像2",type:"image",key:"image2"}],outputs:[{type:"image",name:"对比结果",key:"image"}],run:(e=(0,i.default)(r.default.mark((function t(e){var n,i;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null==this.texture&&(this.texture=o.gl.createTexture()),t.next=3,o.getImage(e.image1,"texture",{texture:this.texture,gl:o.gl});case 3:return n=t.sent,t.next=6,o.easyFilter(this,{image:e.image2,width:n.width,height:2*n.height,uniforms:{weight:e.weight,uSampler1:n.data},fs:"precision mediump float;\n\t\t\t\t\tvarying vec2 vUV;\n\n\t\t\t\t\tuniform sampler2D uSampler1;\n\t\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t\tuniform vec2 uSize;\n\n\t\t\t\t\tvoid main(void){\n\t\t\t\t\t\t//计算uv\n\t\t\t\t\t\tvec2 uv = vec2(vUV.x,vUV.y * 2.0);\n\n\t\t\t\t\t\t//原图颜色\n\t\t\t\t\t\tif(uv.y < 1.0)\n\t\t\t\t\t\t\tgl_FragColor = texture2D(uSampler1, uv);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tgl_FragColor = texture2D(uSampler, uv - vec2(0.0,1.0));\n\t\t\t\t\t}"});case 6:return i=t.sent,t.abrupt("return",{image:i.outputs[0]});case 8:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}),t.addModule({name:"画布尺寸",menu:["其他","画布尺寸"],key:"image-screen-size",inputs:[{name:"图像",type:"image",key:"image"},{name:"宽度",type:"float",key:"width",default:720,min:1,max:8192,step:1},{name:"高度",type:"float",key:"height",default:480,min:1,max:8192,step:1}],outputs:[{type:"image",name:"对比结果",key:"image"}],run:(n=(0,i.default)(r.default.mark((function t(e){var n,i,a,s;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.image,i=n.width/e.width,a=n.height/e.height,t.next=5,o.easyFilter(this,{image:e.image,width:e.width,height:e.height,buffers:{position:{data:[-i,-a,i,-a,-i,a,-i,a,i,-a,i,a],numComponents:2}}});case 5:return s=t.sent,t.abrupt("return",{image:s.outputs[0]});case 7:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}),t.addModule({name:"主色提取",menu:["其他","主色提取"],key:"other-color-thief",inputs:[{name:"图像",type:"image",key:"image"}],outputs:[{type:"color",name:"主色",key:"color-main"},{type:"color",name:"辅色1",key:"color1"},{type:"color",name:"辅色2",key:"color2"},{type:"color",name:"辅色3",key:"color3"},{type:"color",name:"辅色4",key:"color4"}],run:(a=(0,i.default)(r.default.mark((function t(e){var n,i,a,s,u;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.getImage(e.image,"img");case 2:for(u in n=t.sent,i=new ColorThief,a=new lcg.easycolor(i.getColor(n.data)).toString(),s=i.getPalette(n.data))s[u]=lcg.easycolor(s[u]).toString();return t.abrupt("return",{"color-main":a,color1:s[1],color2:s[2],color3:s[3],color4:s[4]});case 8:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})})}},function(t,e,n){var r=a(n(4)),i=a(n(5));function a(t){return t&&t.__esModule?t:{default:t}}var o=n(14),s=n(3);t.exports=function(t){var e,n,a,u,l;t.addModule({name:"饱和度",menu:["滤镜","饱和度"],key:"filter-gray",inputs:[{name:"图像",type:"image",key:"image"},{name:"饱和度",type:"float",key:"weight",input_type:"range",default:1,min:0,max:2,step:.01}],outputs:[{type:"image",name:"图像",key:"image"}],run:(e=(0,i.default)(r.default.mark((function t(e){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.easyFilter(this,{image:e.image,uniforms:{weight:e.weight},fs:"precision mediump float;\n\t\t\t\t\tvarying vec2 vUV;\n\n\t\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t\tuniform vec2 uSize;\n\t\t\t\t\tuniform float weight;\n\n\t\t\t\t\tvoid main(void){\n\t\t\t\t\t\t//原图颜色\n\t\t\t\t\t\tvec4 color = texture2D(uSampler, vUV);\n\t\t\t\t\t\t//rgb平均值\n\t\t\t\t\t\tfloat c = (color.r + color.g + color.b) / 3.0;\n\t\t\t\t\t\tgl_FragColor = vec4(\n\t\t\t\t\t\t\t(color.r - c) * weight + c,\n\t\t\t\t\t\t\t(color.g - c) * weight + c,\n\t\t\t\t\t\t\t(color.b - c) * weight + c,\n\t\t\t\t\t\t\tcolor.a\n\t\t\t\t\t\t);\n\t\t\t\t\t}"});case 2:return n=t.sent,t.abrupt("return",{image:n.outputs[0]});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}),t.addModule({name:"渐变映射",menu:["滤镜","渐变映射"],key:"filter-gradient-mapping",inputs:[{name:"图像",type:"image",key:"image"},{name:"暗色",type:"color",key:"color_d",default:"#470000"},{name:"亮色",type:"color",key:"color_l",default:"#ffe5e5"}],outputs:[{type:"image",name:"图像",key:"image"}],run:(n=(0,i.default)(r.default.mark((function t(e){var n,i,a;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new s.easycolor(e.color_d),i=new s.easycolor(e.color_l),t.next=4,o.easyFilter(this,{image:e.image,uniforms:{color_d:[n.r/256,n.g/256,n.b/256],color_l:[i.r/256,i.g/256,i.b/256]},fs:"precision mediump float;\n\t\t\t\t\tvarying vec2 vUV;\n\n\t\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t\tuniform vec2 uSize;\n\t\t\t\t\tuniform vec3 color_d;\n\t\t\t\t\tuniform vec3 color_l;\n\n\t\t\t\t\tvoid main(void){\n\t\t\t\t\t\t//原图颜色\n\t\t\t\t\t\tvec4 color = texture2D(uSampler, vUV);\n\t\t\t\t\t\t//rgb平均值\n\t\t\t\t\t\tfloat c = (color.r + color.g + color.b) / 3.0;\n\t\t\t\t\t\tgl_FragColor = vec4((color_l - color_d) * c + color_d,color.a);\n\t\t\t\t\t}"});case 4:return a=t.sent,t.abrupt("return",{image:a.outputs[0]});case 6:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})}),t.addModule({name:"柔光叠加",menu:["滤镜","柔光叠加"],key:"filter-line-color",inputs:[{name:"图像",type:"image",key:"image"},{name:"角度",type:"float",key:"angle",default:0,min:0,max:360,step:.1,input_type:"range"}],outputs:[{type:"image",name:"图像",key:"image"}],run:(a=(0,i.default)(r.default.mark((function t(e){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.easyFilter(this,{image:e.image,uniforms:{iAngle:e.angle*Math.PI/180},fs:"precision mediump float;\n\t\t\t\tvarying vec2 vUV;\n\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\t//光线角度\n\t\t\t\tuniform float iAngle;\n\n\t\t\t\tvoid main(void)\n\t\t\t\t{\n\t\t\t\t\tvec4 color = texture2D(uSampler,vUV);\n\t\t\t\t\tif(color.a <= 0.0){\n\t\t\t\t\t\tgl_FragColor = vec4(0,0,0,0);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t//计算渐变比例\n\t\t\t\t\tvec2 angle = vec2(cos(iAngle),sin(iAngle));\n\t\t\t\t\tfloat v = 0.5 - dot(angle,vUV - 0.5);\n\t\t\t\t\tv = max(0.0,min(1.0,v * 0.7));\n\n\t\t\t\t\t//目标混合颜色rgb\n\t\t\t\t\tvec3 end;\n\n\t\t\t\t\t//计算颜色\n\t\t\t\t\tif(v > 0.5){\n\t\t\t\t\t\tend = vec3(\n\t\t\t\t\t\t\tcolor.r + (2.0 * v - 1.0) * (color.r - color.r * color.r),\n\t\t\t\t\t\t\tcolor.g + (2.0 * v - 1.0) * (color.g - color.g * color.g),\n\t\t\t\t\t\t\tcolor.b + (2.0 * v - 1.0) * (color.b - color.b * color.b)\n\t\t\t\t\t\t);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tend = vec3(\n\t\t\t\t\t\t\tcolor.r + (2.0 * v - 1.0) * (sqrt(color.r) - color.r),\n\t\t\t\t\t\t\tcolor.g + (2.0 * v - 1.0) * (sqrt(color.g) - color.g),\n\t\t\t\t\t\t\tcolor.b + (2.0 * v - 1.0) * (sqrt(color.b) - color.b)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tgl_FragColor = vec4(end,color.a);\n\t\t\t\t}"});case 2:return n=t.sent,t.abrupt("return",{image:n.outputs[0]});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})}),t.addModule({name:"射线投影",menu:["滤镜","射线投影"],key:"filter-light-shadow",inputs:[{name:"图像",type:"image",key:"image"},{name:"角度",type:"float",key:"angle",default:0,min:0,max:360,step:.1,input_type:"range"},{name:"阴影长度",type:"float",key:"len",default:200,min:0,max:500,step:.1,input_type:"range"},{name:"发散角度",type:"float",key:"angleFade",default:15,min:0,max:150,step:.1,input_type:"range"}],outputs:[{type:"image",name:"图像",key:"image"}],run:(u=(0,i.default)(r.default.mark((function t(e){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.easyFilter(this,{image:e.image,uniforms:{iAngle:(e.angle+180)*Math.PI/180,iLen:e.len,iLenSamp:100,iAngleFade:e.angleFade*Math.PI/180,iFade:1,iAlpha:1,iInner:0},fs:"precision mediump float;\n\t\t\t\tvarying vec2 vUV;\n\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\tuniform vec2 uSize;\n\t\t\t\t//光线角度\n\t\t\t\tuniform float iAngle;\n\t\t\t\t//阴影距离\n\t\t\t\tuniform float iLen;\n\t\t\t\t//深度采样次数\n\t\t\t\tuniform float iLenSamp;\n\t\t\t\t//发散角度\n\t\t\t\tuniform float iAngleFade;\n\t\t\t\t//减淡深度\n\t\t\t\tuniform float iFade;\n\t\t\t\t//阴影浓度\n\t\t\t\tuniform float iAlpha;\n\t\t\t\t//是否是内阴影\n\t\t\t\tuniform float iInner;\n\n\t\t\t\t//π\n\t\t\t\tconst float PI = 3.14159265358979323846264;\n\t\t\t\t//角度采样次数\n\t\t\t\tconst float COUNT_ANGLE = 24.0;\n\n\t\t\t\t//像素宽度\n\t\t\t\tvec2 thickness;\n\t\t\t\t//命中值\n\t\t\t\tfloat mitValue = 1.0;\n\n\t\t\t\t//是否命中像素\n\t\t\t\tbool mitPix(vec2 p){\n\t\t\t\t\tvec4 color = texture2D(uSampler,p);\n\t\t\t\t\tif(color.a == mitValue)\n\t\t\t\t\t\treturn true;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\n\t\t\t\t//投射一个角度\n\t\t\t\tvec2 rayTestOne(float angle){\n\t\t\t\t\tthickness = vec2(1.0 / uSize.x,1.0 / uSize.y);\n\t\t\t\t\t//当前采样点\n\t\t\t\t\tvec2 p = vUV;\n\t\t\t\t\t//当前命中权重\n\t\t\t\t\tfloat weight = 0.0;\n\t\t\t\t\t\n\t\t\t\t\t//计算步长\n\t\t\t\t\tvec2 step = vec2(cos(angle) * thickness.x,sin(angle) * thickness.y) * iLen / iLenSamp;\n\n\t\t\t\t\t//循环采样\n\t\t\t\t\tfloat len = 0.0;\n\t\t\t\t\tfor(float i = 1.0;i <= 500.0;i++){\n\t\t\t\t\t\tif(i > iLenSamp)\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tlen++;\n\t\t\t\t\t\t//步进\n\t\t\t\t\t\tp += step;\n\t\t\t\t\t\tif(mitPix(p))\n\t\t\t\t\t\t\tweight += 1.0;\n\t\t\t\t\t\t//如果权足够则停止采样\n\t\t\t\t\t\tif(weight >= 1.0)\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t//距离比例\n\t\t\t\t\tfloat bl = len / iLenSamp;\n\t\t\t\t\tif(iFade <= 0.0)\n\t\t\t\t\t\tbl = 1.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tbl = min(1.0,(1.0 - bl) / iFade);\n\n\t\t\t\t\treturn vec2(weight * bl,len * iLen / iLenSamp);\n\t\t\t\t}\n\n\t\t\t\tvoid main(void)\n\t\t\t\t{\n\t\t\t\t\t//内阴影逻辑转换\n\t\t\t\t\tif(iInner > 0.0)\n\t\t\t\t\t\tmitValue = 0.0;\n\n\t\t\t\t\t//如果在内部则不处理\n\t\t\t\t\tif(mitPix(vUV)){\n\t\t\t\t\t\tgl_FragColor = vec4(0,0,0,0);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//当前点权重\n\t\t\t\t\tfloat weight = 0.0;\n\n\t\t\t\t\t//无角度则单采样\n\t\t\t\t\tif(iAngleFade == 0.0)\n\t\t\t\t\t\tweight = rayTestOne(iAngle).x;\n\t\t\t\t\telse{\n\t\t\t\t\t\t//当前角度\n\t\t\t\t\t\tfloat angle;\n\t\t\t\t\t\tfloat sangle = iAngle - iAngleFade / 2.0;\n\t\t\t\t\t\tfloat cangle = iAngleFade / COUNT_ANGLE;\n\t\t\t\t\t\t//有角度则多采样\n\t\t\t\t\t\tfor(float i = 0.0;i <= COUNT_ANGLE;i++){\n\t\t\t\t\t\t\tangle = sangle + cangle * i;\n\t\t\t\t\t\t\tweight += rayTestOne(angle).x / COUNT_ANGLE * (1.0 - abs(i - COUNT_ANGLE / 2.0) / COUNT_ANGLE);\n\t\t\t\t\t\t\tif(weight >= 1.0)\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//内阴影边缘处理\n\t\t\t\t\tif(iInner > 0.0)\n\t\t\t\t\t\tweight *= texture2D(uSampler,vUV).a;\n\t\t\t\t\telse\n\t\t\t\t\t\tweight *= 1.0 - texture2D(uSampler,vUV).a;\n\n\t\t\t\t\t//着色\n\t\t\t\t\tgl_FragColor = vec4(vec3(0,0,0),weight * iAlpha);\n\t\t\t\t}"});case 2:return n=t.sent,t.abrupt("return",{image:n.outputs[0]});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})}),t.addModule({name:"内高光",menu:["滤镜","内高光"],key:"filter-inner-light",inputs:[{name:"图像",type:"image",key:"image"},{name:"角度",type:"float",key:"angle",default:0,min:0,max:360,step:.1,input_type:"range"},{name:"光照强度",type:"float",key:"str",default:10,min:0,max:40,step:.1,input_type:"range"}],outputs:[{type:"image",name:"图像",key:"image"}],run:(l=(0,i.default)(r.default.mark((function t(e){var n;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.angle=e.angle*Math.PI/180/(2*Math.PI)%1*(2*Math.PI),t.next=3,o.easyFilter(this,{image:e.image,uniforms:{iAngle:e.angle,iStr:e.str},fs:"precision mediump float;\n\t\t\t\tvarying vec2 vUV;\n\t\t\t\tuniform sampler2D uSampler;\n\t\t\t\tuniform vec2 uSize;\n\t\t\t\t//光线角度\n\t\t\t\tuniform float iAngle;\n\t\t\t\t//光线模式\n\t\t\t\tuniform float iMode;\n\t\t\t\t//光照强度\n\t\t\t\tuniform float iStr;\n\n\t\t\t\t//光照颜色\n\t\t\t\tvec4 light_color = vec4(1,1,1,1);\n\n\t\t\t\t//整圆角度\n\t\t\t\tconst float DOUBLE_PI = 3.14159265358979323846264 * 2.0;\n\t\t\t\t//角度采样次数\n\t\t\t\tconst float COUNT_ANGLE = 12.0;\n\t\t\t\t//深度采样次数\n\t\t\t\tconst float COUNT_LENGTH = 3.0;\n\t\t\t\t//总深度\n\t\t\t\tconst float LENGTH = 6.0;\n\n\t\t\t\tvec2 thickness;\n\n\t\t\t\t//获取角度差值\n\t\t\t\tfloat getAngleL(float a1,float a2){\n\t\t\t\t\tfloat a_max = max(a1,a2);\n\t\t\t\t\tfloat a_min = min(a1,a2);\n\t\t\t\t\tfloat val = min(abs(a_max - a_min),abs(a_max - a_min - DOUBLE_PI));\n\t\t\t\t\tval = -val / DOUBLE_PI * 4.0 + 1.0;\n\t\t\t\t\tif(val > 0.0)\n\t\t\t\t\t\tval = val * val;\n\t\t\t\t\telse\n\t\t\t\t\t\tval = -val * val;\n\t\t\t\t\t//val = max(0.0,val - 0.3) / 0.7;\n\t\t\t\t\treturn val;\n\t\t\t\t}\n\n\t\t\t\tvoid main(void)\n\t\t\t\t{\n\t\t\t\t\tthickness = vec2(1.0 / uSize.x,1.0 / uSize.y);\n\t\t\t\t\t//当前颜色\n\t\t\t\t\tvec4 color = texture2D(uSampler,vUV);\n\t\t\t\t\t//当前采样点坐标\n\t\t\t\t\tvec2 samp_pos;\n\t\t\t\t\t//采样点颜色\n\t\t\t\t\tvec4 samp_color;\n\t\t\t\t\t//光照权重强度\n\t\t\t\t\tfloat samp_val = 0.0;\n\t\t\t\t\t//采样角度\n\t\t\t\t\tfloat angle;\n\t\t\t\t\t//采样深度\n\t\t\t\t\tfloat length;\n\t\t\t\t\t//深度权重\n\t\t\t\t\tfloat samp_val_len;\n\t\t\t\t\t//角度权重\n\t\t\t\t\tfloat samp_val_angle;\n\n\t\t\t\t\t//透明部分直接返回\n\t\t\t\t\tif(color.a <= 0.0){\n\t\t\t\t\t\tgl_FragColor = color;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//开始循环深度采样\n\t\t\t\t\tfor(float j = 0.0;j < COUNT_LENGTH;j += 1.0){\n\t\t\t\t\t\tlength = 1.0 - LENGTH * j / COUNT_LENGTH;\n\t\t\t\t\t\tsamp_val_len = (j + 1.0) / COUNT_LENGTH;\n\t\t\t\t\t\tsamp_val_len = samp_val_len * samp_val_len;\n\t\t\t\t\t\t//开始循环角度采样\n\t\t\t\t\t\tfor(float i = 0.0;i < COUNT_ANGLE;i += 1.0){\n\t\t\t\t\t\t\tangle = DOUBLE_PI * i / COUNT_ANGLE;\n\t\t\t\t\t\t\t//计算角度权重\n\t\t\t\t\t\t\tsamp_val_angle = getAngleL(angle,iAngle);\n\t\t\t\t\t\t\t//计算采样点坐标\n\t\t\t\t\t\t\tvec2 samp_pos = vec2(\n\t\t\t\t\t\t\t\tvUV.x + thickness.x * cos(angle) * length,\n\t\t\t\t\t\t\t\tvUV.y + thickness.y * sin(angle) * length\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tsamp_color = texture2D(uSampler, samp_pos);\n\t\t\t\t\t\t\tsamp_val += max(color.a - samp_color.a,0.0) * samp_val_len * samp_val_angle;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//强度计算\n\t\t\t\t\tsamp_val = samp_val / COUNT_ANGLE / COUNT_LENGTH * iStr;\n\t\t\t\t\tif(samp_val > 1.0)\n\t\t\t\t\t\tsamp_val = 1.0;\n\t\t\t\t\tsamp_val = samp_val * color.a;\n\n\t\t\t\t\t//如果光照模式是纯光照\n\t\t\t\t\tif(iMode == 1.0){\n\t\t\t\t\t\tgl_FragColor = light_color * samp_val;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t//混合颜色\n\t\t\t\t\tif(samp_val >= 0.0)\n\t\t\t\t\t\tgl_FragColor = vec4(color * (1.0 - samp_val) + light_color * samp_val);\n\t\t\t\t\telse{\n\t\t\t\t\t\tsamp_val = -samp_val / color.a * 0.5;\n\t\t\t\t\t\tgl_FragColor = vec4(color * (1.0 - samp_val) + vec4(0,0,0,1) * samp_val);\n\t\t\t\t\t}\n\t\t\t\t}"});case 3:return n=t.sent,t.abrupt("return",{image:n.outputs[0]});case 5:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})})}},function(t,e,n){var r=a(n(4)),i=a(n(5));function a(t){return t&&t.__esModule?t:{default:t}}var o=n(14);t.exports=function(t){var e;t.addModule({name:"图层",menu:["布局/合成","图层"],key:"layer-main",inputs:[{name:"图像",type:"image",key:"images",array:!0},{name:"宽度",type:"float",key:"width",default:720,min:1,max:8192,step:1},{name:"高度",type:"float",key:"height",default:480,min:1,max:8192,step:1}],outputs:[{type:"image",name:"图像",key:"image"}],init:function(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")},run:(e=(0,i.default)(r.default.mark((function t(e){var n,i,a,s,u;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.images,this.canvas.width=e.width,this.canvas.height=e.height,t.t0=r.default.keys(n);case 4:if((t.t1=t.t0()).done){t.next=14;break}return i=t.t1.value,t.next=8,o.getImage(n[i],"canvas");case 8:a=t.sent,s=(e.width-a.width)/2,u=(e.height-a.height)/2,this.ctx.drawImage(a.data,s,u),t.next=4;break;case 14:return t.abrupt("return",{image:{data:this.canvas,type:"canvas",width:e.width,height:e.height}});case 15:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})})}}]);